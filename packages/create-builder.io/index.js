#! /usr/bin/env node
const e=require("events"),t=require("child_process"),r=require("path"),n=require("fs"),i=require("tty"),o=require("readline"),s=require("constants"),a=require("stream"),c=require("util"),u=require("assert"),l=require("https"),h=require("url"),d=require("net"),f=require("tls"),p=require("zlib"),m=require("buffer"),g=require("replace-in-file"),y=require("os"),w=require("http");function v(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function b(e){if(e&&e.__esModule)return e;const t=Object.create(null);if(e)for(const r in e)if("default"!==r){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}return t.default=e,Object.freeze(t)}const E=v(e),S=v(t),_=v(r),C=v(n),x=b(i),O=v(i),k=v(o),F=v(s),$=v(a),A=v(c),P=v(u),N=v(h),I=b(h),L=v(d),T=v(f),D=v(p),j=v(m),B=v(y),M=v(w);var H="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},z={exports:{}},R={},U={};class V extends Error{constructor(e,t,r){super(r),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}}U.CommanderError=V,U.InvalidArgumentError=class extends V{constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};const{InvalidArgumentError:q}=U;R.Argument=class{constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e,this.parseArg=(t,r)=>{if(!e.includes(t))throw new q(`Allowed choices are ${e.join(", ")}.`);return this.variadic?this._concatValue(t,r):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},R.humanReadableArgName=function(e){const t=e.name()+(!0===e.variadic?"...":"");return e.required?"<"+t+">":"["+t+"]"};var W={},G={};const{humanReadableArgName:J}=R;G.Help=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1}visibleCommands(e){const t=e.commands.filter((e=>!e._hidden));if(e._hasImplicitHelpCommand()){const[,r,n]=e._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),i=e.createCommand(r).helpOption(!1);i.description(e._helpCommandDescription),n&&i.arguments(n),t.push(i)}return this.sortSubcommands&&t.sort(((e,t)=>e.name().localeCompare(t.name()))),t}visibleOptions(e){const t=e.options.filter((e=>!e.hidden)),r=e._hasHelpOption&&e._helpShortFlag&&!e._findOption(e._helpShortFlag),n=e._hasHelpOption&&!e._findOption(e._helpLongFlag);if(r||n){let i;i=r?n?e.createOption(e._helpFlags,e._helpDescription):e.createOption(e._helpShortFlag,e._helpDescription):e.createOption(e._helpLongFlag,e._helpDescription),t.push(i)}if(this.sortOptions){const e=e=>e.short?e.short.replace(/^-/,""):e.long.replace(/^--/,"");t.sort(((t,r)=>e(t).localeCompare(e(r))))}return t}visibleArguments(e){return e._argsDescription&&e._args.forEach((t=>{t.description=t.description||e._argsDescription[t.name()]||""})),e._args.find((e=>e.description))?e._args:[]}subcommandTerm(e){const t=e._args.map((e=>J(e))).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce(((e,r)=>Math.max(e,t.subcommandTerm(r).length)),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce(((e,r)=>Math.max(e,t.optionTerm(r).length)),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce(((e,r)=>Math.max(e,t.argumentTerm(r).length)),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let r="";for(let t=e.parent;t;t=t.parent)r=t.name()+" "+r;return r+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.description()}optionDescription(e){const t=[];return e.argChoices&&!e.negate&&t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`),void 0===e.defaultValue||e.negate||t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),void 0!==e.envVar&&t.push(`env: ${e.envVar}`),t.length>0?`${e.description} (${t.join(", ")})`:e.description}argumentDescription(e){const t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`),void 0!==e.defaultValue&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){const r=`(${t.join(", ")})`;return e.description?`${e.description} ${r}`:r}return e.description}formatHelp(e,t){const r=t.padWidth(e,t),n=t.helpWidth||80;function i(e,i){if(i){const o=`${e.padEnd(r+2)}${i}`;return t.wrap(o,n-2,r+2)}return e}function o(e){return e.join("\n").replace(/^/gm," ".repeat(2))}let s=[`Usage: ${t.commandUsage(e)}`,""];const a=t.commandDescription(e);a.length>0&&(s=s.concat([a,""]));const c=t.visibleArguments(e).map((e=>i(t.argumentTerm(e),t.argumentDescription(e))));c.length>0&&(s=s.concat(["Arguments:",o(c),""]));const u=t.visibleOptions(e).map((e=>i(t.optionTerm(e),t.optionDescription(e))));u.length>0&&(s=s.concat(["Options:",o(u),""]));const l=t.visibleCommands(e).map((e=>i(t.subcommandTerm(e),t.subcommandDescription(e))));return l.length>0&&(s=s.concat(["Commands:",o(l),""])),s.join("\n")}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}wrap(e,t,r,n=40){if(e.match(/[\n]\s+/))return e;const i=t-r;if(i<n)return e;const o=e.substr(0,r),s=e.substr(r),a=" ".repeat(r),c=new RegExp(".{1,"+(i-1)+"}([\\sâ€‹]|$)|[^\\sâ€‹]+?([\\sâ€‹]|$)","g");return o+(s.match(c)||[]).map(((e,t)=>("\n"===e.slice(-1)&&(e=e.slice(0,e.length-1)),(t>0?a:"")+e.trimRight()))).join("\n")}};var Y={};const{InvalidArgumentError:K}=U;function X(e){let t,r;const n=e.split(/[ |,]+/);return n.length>1&&!/^[[<]/.test(n[1])&&(t=n.shift()),r=n.shift(),!t&&/^-[^-]$/.test(r)&&(t=r,r=void 0),{shortFlag:t,longFlag:r}}Y.Option=class{constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;const r=X(e);this.short=r.shortFlag,this.long=r.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}choices(e){return this.argChoices=e,this.parseArg=(t,r)=>{if(!e.includes(t))throw new K(`Allowed choices are ${e.join(", ")}.`);return this.variadic?this._concatValue(t,r):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce(((e,t)=>e+t[0].toUpperCase()+t.slice(1)))}is(e){return this.short===e||this.long===e}},Y.splitOptionFlags=X;var Z={};Z.suggestSimilar=function(e,t){if(!t||0===t.length)return"";t=Array.from(new Set(t));const r=e.startsWith("--");r&&(e=e.slice(2),t=t.map((e=>e.slice(2))));let n=[],i=3;return t.forEach((t=>{if(t.length<=1)return;const r=function(e,t){if(Math.abs(e.length-t.length)>3)return Math.max(e.length,t.length);const r=[];for(let t=0;t<=e.length;t++)r[t]=[t];for(let e=0;e<=t.length;e++)r[0][e]=e;for(let n=1;n<=t.length;n++)for(let i=1;i<=e.length;i++){let o=1;o=e[i-1]===t[n-1]?0:1,r[i][n]=Math.min(r[i-1][n]+1,r[i][n-1]+1,r[i-1][n-1]+o),i>1&&n>1&&e[i-1]===t[n-2]&&e[i-2]===t[n-1]&&(r[i][n]=Math.min(r[i][n],r[i-2][n-2]+1))}return r[e.length][t.length]}(e,t),o=Math.max(e.length,t.length);(o-r)/o>.4&&(r<i?(i=r,n=[t]):r===i&&n.push(t))})),n.sort(((e,t)=>e.localeCompare(t))),r&&(n=n.map((e=>`--${e}`))),n.length>1?`\n(Did you mean one of ${n.join(", ")}?)`:1===n.length?`\n(Did you mean ${n[0]}?)`:""};const Q=E.default.EventEmitter,ee=S.default,te=_.default,re=C.default,{Argument:ne,humanReadableArgName:ie}=R,{CommanderError:oe}=U,{Help:se}=G,{Option:ae,splitOptionFlags:ce}=Y,{suggestSimilar:ue}=Z;class le extends Q{constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!1,this._outputConfiguration={writeOut:e=>process.stdout.write(e),writeErr:e=>process.stderr.write(e),getOutHelpWidth:()=>process.stdout.isTTY?process.stdout.columns:void 0,getErrHelpWidth:()=>process.stderr.isTTY?process.stderr.columns:void 0,outputError:(e,t)=>t(e)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._hasHelpOption=e._hasHelpOption,this._helpFlags=e._helpFlags,this._helpDescription=e._helpDescription,this._helpShortFlag=e._helpShortFlag,this._helpLongFlag=e._helpLongFlag,this._helpCommandName=e._helpCommandName,this._helpCommandnameAndArgs=e._helpCommandnameAndArgs,this._helpCommandDescription=e._helpCommandDescription,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}command(e,t,r){let n=t,i=r;"object"==typeof n&&null!==n&&(i=n,n=null),i=i||{};const[,o,s]=e.match(/([^ ]+) *(.*)/),a=this.createCommand(o);return n&&(a.description(n),a._executableHandler=!0),i.isDefault&&(this._defaultCommandName=a._name),a._hidden=!(!i.noHelp&&!i.hidden),a._executableFile=i.executableFile||null,s&&a.arguments(s),this.commands.push(a),a.parent=this,a.copyInheritedSettings(this),n?this:a}createCommand(e){return new le(e)}createHelp(){return Object.assign(new se,this.configureHelp())}configureHelp(e){return void 0===e?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return void 0===e?this._outputConfiguration:(Object.assign(this._outputConfiguration,e),this)}showHelpAfterError(e=!0){return"string"!=typeof e&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw new Error("Command passed to .addCommand() must have a name");return function e(t){t.forEach((t=>{if(t._executableHandler&&!t._executableFile)throw new Error(`Must specify executableFile for deeply nested executable: ${t.name()}`);e(t.commands)}))}(e.commands),(t=t||{}).isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this.commands.push(e),e.parent=this,this}createArgument(e,t){return new ne(e,t)}argument(e,t,r,n){const i=this.createArgument(e,t);return"function"==typeof r?i.default(n).argParser(r):i.default(r),this.addArgument(i),this}arguments(e){return e.split(/ +/).forEach((e=>{this.argument(e)})),this}addArgument(e){const t=this._args.slice(-1)[0];if(t&&t.variadic)throw new Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&void 0!==e.defaultValue&&void 0===e.parseArg)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this._args.push(e),this}addHelpCommand(e,t){return!1===e?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof e&&(this._helpCommandName=e.split(" ")[0],this._helpCommandnameAndArgs=e),this._helpCommandDescription=t||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(e,t){const r=["preAction","postAction"];if(!r.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.\nExpecting one of '${r.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return this._exitCallback=e||(e=>{if("commander.executeSubCommandAsync"!==e.code)throw e}),this}_exit(e,t,r){this._exitCallback&&this._exitCallback(new oe(e,t,r)),process.exit(e)}action(e){return this._actionHandler=t=>{const r=this._args.length,n=t.slice(0,r);return this._storeOptionsAsProperties?n[r]=this:n[r]=this.opts(),n.push(this),e.apply(this,n)},this}createOption(e,t){return new ae(e,t)}addOption(e){const t=e.name(),r=e.attributeName();let n=e.defaultValue;if(e.negate||e.optional||e.required||"boolean"==typeof n){if(e.negate){const t=e.long.replace(/^--no-/,"--");n=!this._findOption(t)||this.getOptionValue(r)}void 0!==n&&this.setOptionValueWithSource(r,n,"default")}this.options.push(e);const i=(t,i,o)=>{const s=this.getOptionValue(r);if(null!==t&&e.parseArg)try{t=e.parseArg(t,void 0===s?n:s)}catch(e){if("commander.invalidArgument"===e.code){const t=`${i} ${e.message}`;this._displayError(e.exitCode,e.code,t)}throw e}else null!==t&&e.variadic&&(t=e._concatValue(t,s));"boolean"==typeof s||void 0===s?null==t?this.setOptionValueWithSource(r,!e.negate&&(n||!0),o):this.setOptionValueWithSource(r,t,o):null!==t&&this.setOptionValueWithSource(r,!e.negate&&t,o)};return this.on("option:"+t,(t=>{const r=`error: option '${e.flags}' argument '${t}' is invalid.`;i(t,r,"cli")})),e.envVar&&this.on("optionEnv:"+t,(t=>{const r=`error: option '${e.flags}' value '${t}' from env '${e.envVar}' is invalid.`;i(t,r,"env")})),this}_optionEx(e,t,r,n,i){const o=this.createOption(t,r);if(o.makeOptionMandatory(!!e.mandatory),"function"==typeof n)o.default(i).argParser(n);else if(n instanceof RegExp){const e=n;n=(t,r)=>{const n=e.exec(t);return n?n[0]:r},o.default(i).argParser(n)}else o.default(n);return this.addOption(o)}option(e,t,r,n){return this._optionEx({},e,t,r,n)}requiredOption(e,t,r,n){return this._optionEx({mandatory:!0},e,t,r,n)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){if(this._passThroughOptions=!!e,this.parent&&e&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(e=!0){if(this._storeOptionsAsProperties=!!e,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this}setOptionValueWithSource(e,t,r){return this.setOptionValue(e,t),this._optionValueSources[e]=r,this}getOptionValueSource(e){return this._optionValueSources[e]}_prepareUserArgs(e,t){if(void 0!==e&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");let r;switch(t=t||{},void 0===e&&(e=process.argv,process.versions&&process.versions.electron&&(t.from="electron")),this.rawArgs=e.slice(),t.from){case void 0:case"node":this._scriptPath=e[1],r=e.slice(2);break;case"electron":process.defaultApp?(this._scriptPath=e[1],r=e.slice(2)):r=e.slice(1);break;case"user":r=e.slice(0);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}return!this._scriptPath&&require.main&&(this._scriptPath=require.main.filename),this._name=this._name||this._scriptPath&&te.basename(this._scriptPath,te.extname(this._scriptPath)),r}parse(e,t){const r=this._prepareUserArgs(e,t);return this._parseCommand([],r),this}async parseAsync(e,t){const r=this._prepareUserArgs(e,t);return await this._parseCommand([],r),this}_executeSubCommand(e,t){t=t.slice();let r=!1;const n=[".js",".ts",".tsx",".mjs",".cjs"];this._checkForMissingMandatoryOptions();let i,o=this._scriptPath;!o&&require.main&&(o=require.main.filename);try{const e=re.realpathSync(o);i=te.dirname(e)}catch(e){i="."}let s=te.basename(o,te.extname(o))+"-"+e._name;e._executableFile&&(s=e._executableFile);const a=te.join(i,s);let c;re.existsSync(a)?s=a:n.forEach((e=>{re.existsSync(`${a}${e}`)&&(s=`${a}${e}`)})),r=n.includes(te.extname(s)),"win32"!==process.platform?r?(t.unshift(s),t=de(process.execArgv).concat(t),c=ee.spawn(process.argv[0],t,{stdio:"inherit"})):c=ee.spawn(s,t,{stdio:"inherit"}):(t.unshift(s),t=de(process.execArgv).concat(t),c=ee.spawn(process.execPath,t,{stdio:"inherit"}));["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((e=>{process.on(e,(()=>{!1===c.killed&&null===c.exitCode&&c.kill(e)}))}));const u=this._exitCallback;u?c.on("close",(()=>{u(new oe(process.exitCode||0,"commander.executeSubCommandAsync","(close)"))})):c.on("close",process.exit.bind(process)),c.on("error",(t=>{if("ENOENT"===t.code){const t=`'${s}' does not exist\n - if '${e._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name`;throw new Error(t)}if("EACCES"===t.code)throw new Error(`'${s}' not executable`);if(u){const e=new oe(1,"commander.executeSubCommandAsync","(error)");e.nestedError=t,u(e)}else process.exit(1)})),this.runningCommand=c}_dispatchSubcommand(e,t,r){const n=this._findCommand(e);if(n||this.help({error:!0}),!n._executableHandler)return n._parseCommand(t,r);this._executeSubCommand(n,t.concat(r))}_checkNumberOfArguments(){this._args.forEach(((e,t)=>{e.required&&null==this.args[t]&&this.missingArgument(e.name())})),this._args.length>0&&this._args[this._args.length-1].variadic||this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){const e=(e,t,r)=>{let n=t;if(null!==t&&e.parseArg)try{n=e.parseArg(t,r)}catch(r){if("commander.invalidArgument"===r.code){const n=`error: command-argument value '${t}' is invalid for argument '${e.name()}'. ${r.message}`;this._displayError(r.exitCode,r.code,n)}throw r}return n};this._checkNumberOfArguments();const t=[];this._args.forEach(((r,n)=>{let i=r.defaultValue;r.variadic?n<this.args.length?(i=this.args.slice(n),r.parseArg&&(i=i.reduce(((t,n)=>e(r,n,t)),r.defaultValue))):void 0===i&&(i=[]):n<this.args.length&&(i=this.args[n],r.parseArg&&(i=e(r,i,r.defaultValue))),t[n]=i})),this.processedArgs=t}_chainOrCall(e,t){return e&&e.then&&"function"==typeof e.then?e.then((()=>t())):t()}_chainOrCallHooks(e,t){let r=e;const n=[];return fe(this).reverse().filter((e=>void 0!==e._lifeCycleHooks[t])).forEach((e=>{e._lifeCycleHooks[t].forEach((t=>{n.push({hookedCommand:e,callback:t})}))})),"postAction"===t&&n.reverse(),n.forEach((e=>{r=this._chainOrCall(r,(()=>e.callback(e.hookedCommand,this)))})),r}_parseCommand(e,t){const r=this.parseOptions(t);if(this._parseOptionsEnv(),e=e.concat(r.operands),t=r.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._hasImplicitHelpCommand()&&e[0]===this._helpCommandName)return 1===e.length&&this.help(),this._dispatchSubcommand(e[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return he(this,t),this._dispatchSubcommand(this._defaultCommandName,e,t);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),he(this,r.unknown),this._checkForMissingMandatoryOptions();const n=()=>{r.unknown.length>0&&this.unknownOption(r.unknown[0])},i=`command:${this.name()}`;if(this._actionHandler){let r;return n(),this._processArguments(),r=this._chainOrCallHooks(r,"preAction"),r=this._chainOrCall(r,(()=>this._actionHandler(this.processedArgs))),this.parent&&this.parent.emit(i,e,t),r=this._chainOrCallHooks(r,"postAction"),r}if(this.parent&&this.parent.listenerCount(i))n(),this._processArguments(),this.parent.emit(i,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(n(),this._processArguments())}else this.commands.length?(n(),this.help({error:!0})):(n(),this._processArguments())}_findCommand(e){if(e)return this.commands.find((t=>t._name===e||t._aliases.includes(e)))}_findOption(e){return this.options.find((t=>t.is(e)))}_checkForMissingMandatoryOptions(){for(let e=this;e;e=e.parent)e.options.forEach((t=>{t.mandatory&&void 0===e.getOptionValue(t.attributeName())&&e.missingMandatoryOptionValue(t)}))}parseOptions(e){const t=[],r=[];let n=t;const i=e.slice();function o(e){return e.length>1&&"-"===e[0]}let s=null;for(;i.length;){const e=i.shift();if("--"===e){n===r&&n.push(e),n.push(...i);break}if(!s||o(e)){if(s=null,o(e)){const t=this._findOption(e);if(t){if(t.required){const e=i.shift();void 0===e&&this.optionMissingArgument(t),this.emit(`option:${t.name()}`,e)}else if(t.optional){let e=null;i.length>0&&!o(i[0])&&(e=i.shift()),this.emit(`option:${t.name()}`,e)}else this.emit(`option:${t.name()}`);s=t.variadic?t:null;continue}}if(e.length>2&&"-"===e[0]&&"-"!==e[1]){const t=this._findOption(`-${e[1]}`);if(t){t.required||t.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${t.name()}`,e.slice(2)):(this.emit(`option:${t.name()}`),i.unshift(`-${e.slice(2)}`));continue}}if(/^--[^=]+=/.test(e)){const t=e.indexOf("="),r=this._findOption(e.slice(0,t));if(r&&(r.required||r.optional)){this.emit(`option:${r.name()}`,e.slice(t+1));continue}}if(o(e)&&(n=r),(this._enablePositionalOptions||this._passThroughOptions)&&0===t.length&&0===r.length){if(this._findCommand(e)){t.push(e),i.length>0&&r.push(...i);break}if(e===this._helpCommandName&&this._hasImplicitHelpCommand()){t.push(e),i.length>0&&t.push(...i);break}if(this._defaultCommandName){r.push(e),i.length>0&&r.push(...i);break}}if(this._passThroughOptions){n.push(e),i.length>0&&n.push(...i);break}n.push(e)}else this.emit(`option:${s.name()}`,e)}return{operands:t,unknown:r}}opts(){if(this._storeOptionsAsProperties){const e={},t=this.options.length;for(let r=0;r<t;r++){const t=this.options[r].attributeName();e[t]=t===this._versionOptionName?this._version:this[t]}return e}return this._optionValues}_displayError(e,t,r){this._outputConfiguration.outputError(`${r}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0})),this._exit(e,t,r)}_parseOptionsEnv(){this.options.forEach((e=>{if(e.envVar&&e.envVar in process.env){const t=e.attributeName();(void 0===this.getOptionValue(t)||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,process.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}}))}missingArgument(e){const t=`error: missing required argument '${e}'`;this._displayError(1,"commander.missingArgument",t)}optionMissingArgument(e){const t=`error: option '${e.flags}' argument missing`;this._displayError(1,"commander.optionMissingArgument",t)}missingMandatoryOptionValue(e){const t=`error: required option '${e.flags}' not specified`;this._displayError(1,"commander.missingMandatoryOptionValue",t)}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let r=[],n=this;do{const e=n.createHelp().visibleOptions(n).filter((e=>e.long)).map((e=>e.long));r=r.concat(e),n=n.parent}while(n&&!n._enablePositionalOptions);t=ue(e,r)}const r=`error: unknown option '${e}'${t}`;this._displayError(1,"commander.unknownOption",r)}_excessArguments(e){if(this._allowExcessArguments)return;const t=this._args.length,r=1===t?"":"s",n=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${t} argument${r} but got ${e.length}.`;this._displayError(1,"commander.excessArguments",n)}unknownCommand(){const e=this.args[0];let t="";if(this._showSuggestionAfterError){const r=[];this.createHelp().visibleCommands(this).forEach((e=>{r.push(e.name()),e.alias()&&r.push(e.alias())})),t=ue(e,r)}const r=`error: unknown command '${e}'${t}`;this._displayError(1,"commander.unknownCommand",r)}version(e,t,r){if(void 0===e)return this._version;this._version=e,t=t||"-V, --version",r=r||"output the version number";const n=this.createOption(t,r);return this._versionOptionName=n.attributeName(),this.options.push(n),this.on("option:"+n.name(),(()=>{this._outputConfiguration.writeOut(`${e}\n`),this._exit(0,"commander.version",e)})),this}description(e,t){return void 0===e&&void 0===t?this._description:(this._description=e,t&&(this._argsDescription=t),this)}alias(e){if(void 0===e)return this._aliases[0];let t=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw new Error("Command alias can't be the same as its name");return t._aliases.push(e),this}aliases(e){return void 0===e?this._aliases:(e.forEach((e=>this.alias(e))),this)}usage(e){if(void 0===e){if(this._usage)return this._usage;const e=this._args.map((e=>ie(e)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?e:[]).join(" ")}return this._usage=e,this}name(e){return void 0===e?this._name:(this._name=e,this)}helpInformation(e){const t=this.createHelp();return void 0===t.helpWidth&&(t.helpWidth=e&&e.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),t.formatHelp(this,t)}_getHelpContext(e){const t={error:!!(e=e||{}).error};let r;return r=t.error?e=>this._outputConfiguration.writeErr(e):e=>this._outputConfiguration.writeOut(e),t.write=e.write||r,t.command=this,t}outputHelp(e){let t;"function"==typeof e&&(t=e,e=void 0);const r=this._getHelpContext(e);fe(this).reverse().forEach((e=>e.emit("beforeAllHelp",r))),this.emit("beforeHelp",r);let n=this.helpInformation(r);if(t&&(n=t(n),"string"!=typeof n&&!Buffer.isBuffer(n)))throw new Error("outputHelp callback must return a string or a Buffer");r.write(n),this.emit(this._helpLongFlag),this.emit("afterHelp",r),fe(this).forEach((e=>e.emit("afterAllHelp",r)))}helpOption(e,t){if("boolean"==typeof e)return this._hasHelpOption=e,this;this._helpFlags=e||this._helpFlags,this._helpDescription=t||this._helpDescription;const r=ce(this._helpFlags);return this._helpShortFlag=r.shortFlag,this._helpLongFlag=r.longFlag,this}help(e){this.outputHelp(e);let t=process.exitCode||0;0===t&&e&&"function"!=typeof e&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){const r=["beforeAll","before","after","afterAll"];if(!r.includes(e))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${r.join("', '")}'`);const n=`${e}Help`;return this.on(n,(e=>{let r;r="function"==typeof t?t({error:e.error,command:e.command}):t,r&&e.write(`${r}\n`)})),this}}function he(e,t){e._hasHelpOption&&t.find((t=>t===e._helpLongFlag||t===e._helpShortFlag))&&(e.outputHelp(),e._exit(0,"commander.helpDisplayed","(outputHelp)"))}function de(e){return e.map((e=>{if(!e.startsWith("--inspect"))return e;let t,r,n="127.0.0.1",i="9229";return null!==(r=e.match(/^(--inspect(-brk)?)$/))?t=r[1]:null!==(r=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(t=r[1],/^\d+$/.test(r[3])?i=r[3]:n=r[3]):null!==(r=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(t=r[1],n=r[3],i=r[4]),t&&"0"!==i?`${t}=${n}:${parseInt(i)+1}`:e}))}function fe(e){const t=[];for(let r=e;r;r=r.parent)t.push(r);return t}W.Command=le,function(e,t){const{Argument:r}=R,{Command:n}=W,{CommanderError:i,InvalidArgumentError:o}=U,{Help:s}=G,{Option:a}=Y;(t=e.exports=new n).program=t,t.Argument=r,t.Command=n,t.CommanderError=i,t.Help=s,t.InvalidArgumentError=o,t.InvalidOptionArgumentError=o,t.Option=a}(z,z.exports);const pe=process.env||{},me=process.argv||[],ge="NO_COLOR"in pe||me.includes("--no-color"),ye="FORCE_COLOR"in pe||me.includes("--color"),we="win32"===process.platform,ve=x&&x.isatty&&x.isatty(1)&&pe.TERM&&"dumb"!==pe.TERM,be=!ge&&(ye||we||ve||"CI"in pe&&("GITHUB_ACTIONS"in pe||"GITLAB_CI"in pe||"CIRCLECI"in pe)),Ee=(e,t,r,n,i=t.substring(0,e)+n,o=t.substring(e+r.length),s=o.indexOf(r))=>i+(s<0?o:Ee(s,o,r,n)),Se=(e,t,r=e,n=e.length+1)=>i=>i||""!==i&&void 0!==i?((e,t,r,n,i)=>e<0?r+t+n:r+Ee(e,t,n,i)+n)((""+i).indexOf(t,n),i,e,t,r):"",_e=(e,t,r)=>Se(`[${e}m`,`[${t}m`,r),Ce={reset:_e(0,0),bold:_e(1,22,"[22m[1m"),dim:_e(2,22,"[22m[2m"),italic:_e(3,23),underline:_e(4,24),inverse:_e(7,27),hidden:_e(8,28),strikethrough:_e(9,29),black:_e(30,39),red:_e(31,39),green:_e(32,39),yellow:_e(33,39),blue:_e(34,39),magenta:_e(35,39),cyan:_e(36,39),white:_e(37,39),gray:_e(90,39),bgBlack:_e(40,49),bgRed:_e(41,49),bgGreen:_e(42,49),bgYellow:_e(43,49),bgBlue:_e(44,49),bgMagenta:_e(45,49),bgCyan:_e(46,49),bgWhite:_e(47,49),blackBright:_e(90,39),redBright:_e(91,39),greenBright:_e(92,39),yellowBright:_e(93,39),blueBright:_e(94,39),magentaBright:_e(95,39),cyanBright:_e(96,39),whiteBright:_e(97,39),bgBlackBright:_e(100,49),bgRedBright:_e(101,49),bgGreenBright:_e(102,49),bgYellowBright:_e(103,49),bgBlueBright:_e(104,49),bgMagentaBright:_e(105,49),bgCyanBright:_e(106,49),bgWhiteBright:_e(107,49)},xe=e=>e,{reset:Oe,bold:ke,dim:Fe,italic:$e,underline:Ae,inverse:Pe,hidden:Ne,strikethrough:Ie,black:Le,red:Te,green:De,yellow:je,blue:Be,magenta:Me,cyan:He,white:ze,gray:Re,bgBlack:Ue,bgRed:Ve,bgGreen:qe,bgYellow:We,bgBlue:Ge,bgMagenta:Je,bgCyan:Ye,bgWhite:Ke,blackBright:Xe,redBright:Ze,greenBright:Qe,yellowBright:et,blueBright:tt,magentaBright:rt,cyanBright:nt,whiteBright:it,bgBlackBright:ot,bgRedBright:st,bgGreenBright:at,bgYellowBright:ct,bgBlueBright:ut,bgMagentaBright:lt,bgCyanBright:ht,bgWhiteBright:dt}=(({useColor:e=be}={})=>e?Ce:Object.keys(Ce).reduce(((e,t)=>({...e,[t]:xe})),{}))();var ft=k.default,pt=0,mt=60;function gt(e){this.clearLine(this.stream),this.stream.write(e)}var yt=function(e){if(!(this instanceof yt))return new yt(e);"string"==typeof e?e={text:e}:e||(e={}),this.text=e.text||"",this.setSpinnerString(pt),this.setSpinnerDelay(mt),this.onTick=e.onTick||gt,this.stream=e.stream||process.stdout};yt.spinners=["|/-\\","â ‚-â€“â€”â€“-","â—â—“â—‘â—’","â—´â—·â—¶â—µ","â—°â—³â—²â—±","â––â–˜â–â–—","â– â–¡â–ªâ–«","â–Œâ–€â–â–„","â–‰â–Šâ–‹â–Œâ–â–Žâ–â–Žâ–â–Œâ–‹â–Šâ–‰","â–â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒ","â†â†–â†‘â†—â†’â†˜â†“â†™","â”¤â”˜â”´â””â”œâ”Œâ”¬â”","â—¢â—£â—¤â—¥",".oOÂ°Oo.",".oO@*",["ðŸŒ","ðŸŒŽ","ðŸŒ"],"â—¡â—¡ âŠ™âŠ™ â— â— ","â˜±â˜²â˜´","â ‹â ™â ¹â ¸â ¼â ´â ¦â §â ‡â ","â ‹â ™â šâ žâ –â ¦â ´â ²â ³â “","â „â †â ‡â ‹â ™â ¸â °â  â °â ¸â ™â ‹â ‡â †","â ‹â ™â šâ ’â ‚â ‚â ’â ²â ´â ¦â –â ’â â â ’â “â ‹","â â ‰â ™â šâ ’â ‚â ‚â ’â ²â ´â ¤â „â „â ¤â ´â ²â ’â ‚â ‚â ’â šâ ™â ‰â ","â ˆâ ‰â ‹â “â ’â â â ’â –â ¦â ¤â  â  â ¤â ¦â –â ’â â â ’â “â ‹â ‰â ˆ","â â â ‰â ™â šâ ’â ‚â ‚â ’â ²â ´â ¤â „â „â ¤â  â  â ¤â ¦â –â ’â â â ’â “â ‹â ‰â ˆâ ˆ","â¢„â¢‚â¢â¡â¡ˆâ¡â¡ ","â¢¹â¢ºâ¢¼â£¸â£‡â¡§â¡—â¡","â£¾â£½â£»â¢¿â¡¿â£Ÿâ£¯â£·","â â ‚â „â¡€â¢€â  â â ˆ",["ðŸŒ‘","ðŸŒ’","ðŸŒ“","ðŸŒ”","ðŸŒ•","ðŸŒ","ðŸŒ–","ðŸŒ—","ðŸŒ˜","ðŸŒš"],["ðŸ•›","ðŸ•","ðŸ•‘","ðŸ•’","ðŸ•“","ðŸ•”","ðŸ••","ðŸ•–","ðŸ•—","ðŸ•˜","ðŸ•™","ðŸ•š"]],yt.setDefaultSpinnerString=function(e){return pt=e,this},yt.setDefaultSpinnerDelay=function(e){return mt=e,this},yt.prototype.start=function(){if(this.stream===process.stdout&&!0!==this.stream.isTTY)return this;var e=0,t=this,r=function(){var r=t.text.indexOf("%s")>-1?t.text.replace("%s",t.chars[e]):t.chars[e]+" "+t.text;t.onTick(r),e=++e%t.chars.length};return r(),this.id=setInterval(r,this.delay),this},yt.prototype.isSpinning=function(){return void 0!==this.id},yt.prototype.setSpinnerDelay=function(e){return this.delay=e,this},yt.prototype.setSpinnerString=function(e){const t=function(e,t){if(!function(e){return"number"==typeof e&&e%1==0}(e))return e+"";var r=yt.spinners.length;return e=(e=e>=r?0:e)<0?r+e:e,yt.spinners[e]}(e,this.spinners);return this.chars=Array.isArray(t)?t:t.split(""),this},yt.prototype.setSpinnerTitle=function(e){return this.text=e,this},yt.prototype.stop=function(e){return!1===this.isSpinning||(clearInterval(this.id),this.id=void 0,e&&this.clearLine(this.stream)),this},yt.prototype.clearLine=function(e){return ft.clearLine(e,0),ft.cursorTo(e,0),this};var wt=yt,vt={},bt={fromCallback:function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise(((r,n)=>{e.call(this,...t,((e,t)=>null!=e?n(e):r(t)))}));e.apply(this,t)}),"name",{value:e.name})},fromPromise:function(e){return Object.defineProperty((function(...t){const r=t[t.length-1];if("function"!=typeof r)return e.apply(this,t);e.apply(this,t.slice(0,-1)).then((e=>r(null,e)),r)}),"name",{value:e.name})}},Et=F.default,St=process.cwd,_t=null,Ct=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return _t||(_t=St.call(process)),_t};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var xt=process.chdir;process.chdir=function(e){_t=null,xt.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,xt)}var Ot=function(e){Et.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,n){e.open(t,Et.O_WRONLY|Et.O_SYMLINK,r,(function(t,i){t?n&&n(t):e.fchmod(i,r,(function(t){e.close(i,(function(e){n&&n(t||e)}))}))}))},e.lchmodSync=function(t,r){var n,i=e.openSync(t,Et.O_WRONLY|Et.O_SYMLINK,r),o=!0;try{n=e.fchmodSync(i,r),o=!1}finally{if(o)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return n}}(e);e.lutimes||function(e){Et.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,n,i){e.open(t,Et.O_SYMLINK,(function(t,o){t?i&&i(t):e.futimes(o,r,n,(function(t){e.close(o,(function(e){i&&i(t||e)}))}))}))},e.lutimesSync=function(t,r,n){var i,o=e.openSync(t,Et.O_SYMLINK),s=!0;try{i=e.futimesSync(o,r,n),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}):(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e);e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){});"win32"===Ct&&(e.rename=(t=e.rename,function(r,n,i){var o=Date.now(),s=0;t(r,n,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(n,(function(e,o){e&&"ENOENT"===e.code?t(r,n,a):i(c)}))}),s),void(s<100&&(s+=10));i&&i(c)}))}));var t;function r(t){return t?function(r,n,i){return t.call(e,r,n,(function(e){c(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function n(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!c(e))throw e}}:t}function i(t){return t?function(r,n,i,o){return t.call(e,r,n,i,(function(e){c(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function o(t){return t?function(r,n,i){try{return t.call(e,r,n,i)}catch(e){if(!c(e))throw e}}:t}function s(t){return t?function(r,n,i){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof n&&(i=n,n=null),n?t.call(e,r,n,o):t.call(e,r,o)}:t}function a(t){return t?function(r,n){var i=n?t.call(e,r,n):t.call(e,r);return i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296),i}:t}function c(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read=function(t){function r(r,n,i,o,s,a){var c;if(a&&"function"==typeof a){var u=0;c=function(l,h,d){if(l&&"EAGAIN"===l.code&&u<10)return u++,t.call(e,r,n,i,o,s,c);a.apply(this,arguments)}}return t.call(e,r,n,i,o,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync=(u=e.readSync,function(t,r,n,i,o){for(var s=0;;)try{return u.call(e,t,r,n,i,o)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}});var u};var kt=$.default.Stream,Ft=function(e){return{ReadStream:function t(r,n){if(!(this instanceof t))return new t(r,n);kt.call(this);var i=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,n=n||{};for(var o=Object.keys(n),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=n[c]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){i._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()}))},WriteStream:function t(r,n){if(!(this instanceof t))return new t(r,n);kt.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var i=Object.keys(n),o=0,s=i.length;o<s;o++){var a=i[o];this[a]=n[a]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var $t=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:At(e)};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})),t},At=Object.getPrototypeOf||function(e){return e.__proto__};var Pt,Nt,It=C.default,Lt=Ot,Tt=Ft,Dt=$t,jt=A.default;function Bt(e,t){Object.defineProperty(e,Pt,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(Pt=Symbol.for("graceful-fs.queue"),Nt=Symbol.for("graceful-fs.previous")):(Pt="___graceful-fs.queue",Nt="___graceful-fs.previous");var Mt=function(){};if(jt.debuglog?Mt=jt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Mt=function(){var e=jt.format.apply(jt,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!It[Pt]){var Ht=H[Pt]||[];Bt(It,Ht),It.close=function(e){function t(t,r){return e.call(It,t,(function(e){e||qt(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,Nt,{value:e}),t}(It.close),It.closeSync=function(e){function t(t){e.apply(It,arguments),qt()}return Object.defineProperty(t,Nt,{value:e}),t}(It.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){Mt(It[Pt]),P.default.equal(It[Pt].length,0)}))}H[Pt]||Bt(H,It[Pt]);var zt,Rt=Ut(Dt(It));function Ut(e){Lt(e),e.gracefulify=Ut,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){"function"==typeof r&&(n=r,r=null);return function e(r,n,i,o){return t(r,n,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof i&&i.apply(this,arguments):Vt([e,[r,n,i],t,o||Date.now(),Date.now()])}))}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function e(t,n,i,o,s){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):Vt([e,[t,n,i,o],r,s||Date.now(),Date.now()])}))}(e,t,n,i)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function e(t,r,i,o,s){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof o&&o.apply(this,arguments):Vt([e,[t,r,i,o],n,s||Date.now(),Date.now()])}))}(e,t,r,i)});var i=e.copyFile;i&&(e.copyFile=function(e,t,r,n){"function"==typeof r&&(n=r,r=0);return function e(t,r,n,o,s){return i(t,r,n,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):Vt([e,[t,r,n,o],i,s||Date.now(),Date.now()])}))}(e,t,r,n)});var o=e.readdir;if(e.readdir=function(e,t,r){"function"==typeof t&&(r=t,t=null);return function e(t,r,n,i){return o(t,r,(function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"==typeof n&&n.call(this,o,s)):Vt([e,[t,r,n],o,i||Date.now(),Date.now()])}))}(e,t,r)},"v0.8"===process.version.substr(0,4)){var s=Tt(e);h=s.ReadStream,d=s.WriteStream}var a=e.ReadStream;a&&(h.prototype=Object.create(a.prototype),h.prototype.open=function(){var e=this;p(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var c=e.WriteStream;c&&(d.prototype=Object.create(c.prototype),d.prototype.open=function(){var e=this;p(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var u=h;Object.defineProperty(e,"FileReadStream",{get:function(){return u},set:function(e){u=e},enumerable:!0,configurable:!0});var l=d;function h(e,t){return this instanceof h?(a.apply(this,arguments),this):h.apply(Object.create(h.prototype),arguments)}function d(e,t){return this instanceof d?(c.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return l},set:function(e){l=e},enumerable:!0,configurable:!0});var f=e.open;function p(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,i,o){return f(t,r,n,(function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof i&&i.apply(this,arguments):Vt([e,[t,r,n,i],s,o||Date.now(),Date.now()])}))}(e,t,r,n)}return e.open=p,e}function Vt(e){Mt("ENQUEUE",e[0].name,e[1]),It[Pt].push(e),Wt()}function qt(){for(var e=Date.now(),t=0;t<It[Pt].length;++t)It[Pt][t].length>2&&(It[Pt][t][3]=e,It[Pt][t][4]=e);Wt()}function Wt(){if(clearTimeout(zt),zt=void 0,0!==It[Pt].length){var e=It[Pt].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(void 0===i)Mt("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){Mt("TIMEOUT",t.name,r);var s=r.pop();"function"==typeof s&&s.call(null,n)}else{var a=Date.now()-o,c=Math.max(o-i,1);a>=Math.min(1.2*c,100)?(Mt("RETRY",t.name,r),t.apply(null,r.concat([i]))):It[Pt].push(e)}void 0===zt&&(zt=setTimeout(Wt,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!It.__patched&&(Rt=Ut(It),It.__patched=!0),function(e){const t=bt.fromCallback,r=Rt,n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof r[e]));Object.assign(e,r),n.forEach((n=>{e[n]=t(r[n])})),e.realpath.native=t(r.realpath.native),e.exists=function(e,t){return"function"==typeof t?r.exists(e,t):new Promise((t=>r.exists(e,t)))},e.read=function(e,t,n,i,o,s){return"function"==typeof s?r.read(e,t,n,i,o,s):new Promise(((s,a)=>{r.read(e,t,n,i,o,((e,t,r)=>{if(e)return a(e);s({bytesRead:t,buffer:r})}))}))},e.write=function(e,t,...n){return"function"==typeof n[n.length-1]?r.write(e,t,...n):new Promise(((i,o)=>{r.write(e,t,...n,((e,t,r)=>{if(e)return o(e);i({bytesWritten:t,buffer:r})}))}))},"function"==typeof r.writev&&(e.writev=function(e,t,...n){return"function"==typeof n[n.length-1]?r.writev(e,t,...n):new Promise(((i,o)=>{r.writev(e,t,...n,((e,t,r)=>{if(e)return o(e);i({bytesWritten:t,buffers:r})}))}))})}(vt);var Gt={},Jt={};const Yt=_.default;Jt.checkPath=function(e){if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(Yt.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}};const Kt=vt,{checkPath:Xt}=Jt,Zt=e=>"number"==typeof e?e:{mode:511,...e}.mode;Gt.makeDir=async(e,t)=>(Xt(e),Kt.mkdir(e,{mode:Zt(t),recursive:!0})),Gt.makeDirSync=(e,t)=>(Xt(e),Kt.mkdirSync(e,{mode:Zt(t),recursive:!0}));const Qt=bt.fromPromise,{makeDir:er,makeDirSync:tr}=Gt,rr=Qt(er);var nr={mkdirs:rr,mkdirsSync:tr,mkdirp:rr,mkdirpSync:tr,ensureDir:rr,ensureDirSync:tr};const ir=Rt;var or=function(e,t,r,n){ir.open(e,"r+",((e,i)=>{if(e)return n(e);ir.futimes(i,t,r,(e=>{ir.close(i,(t=>{n&&n(e||t)}))}))}))},sr=function(e,t,r){const n=ir.openSync(e,"r+");return ir.futimesSync(n,t,r),ir.closeSync(n)};const ar=vt,cr=_.default,ur=A.default;function lr(e,t,r){const n=r.dereference?e=>ar.stat(e,{bigint:!0}):e=>ar.lstat(e,{bigint:!0});return Promise.all([n(e),n(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}function hr(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function dr(e,t){const r=cr.resolve(e).split(cr.sep).filter((e=>e)),n=cr.resolve(t).split(cr.sep).filter((e=>e));return r.reduce(((e,t,r)=>e&&n[r]===t),!0)}function fr(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}var pr={checkPaths:function(e,t,r,n,i){ur.callbackify(lr)(e,t,n,((n,o)=>{if(n)return i(n);const{srcStat:s,destStat:a}=o;if(a){if(hr(s,a)){const n=cr.basename(e),o=cr.basename(t);return"move"===r&&n!==o&&n.toLowerCase()===o.toLowerCase()?i(null,{srcStat:s,destStat:a,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(s.isDirectory()&&!a.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!s.isDirectory()&&a.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return s.isDirectory()&&dr(e,t)?i(new Error(fr(e,t,r))):i(null,{srcStat:s,destStat:a})}))},checkPathsSync:function(e,t,r,n){const{srcStat:i,destStat:o}=function(e,t,r){let n;const i=r.dereference?e=>ar.statSync(e,{bigint:!0}):e=>ar.lstatSync(e,{bigint:!0}),o=i(e);try{n=i(t)}catch(e){if("ENOENT"===e.code)return{srcStat:o,destStat:null};throw e}return{srcStat:o,destStat:n}}(e,t,n);if(o){if(hr(i,o)){const n=cr.basename(e),s=cr.basename(t);if("move"===r&&n!==s&&n.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&dr(e,t))throw new Error(fr(e,t,r));return{srcStat:i,destStat:o}},checkParentPaths:function e(t,r,n,i,o){const s=cr.resolve(cr.dirname(t)),a=cr.resolve(cr.dirname(n));if(a===s||a===cr.parse(a).root)return o();ar.stat(a,{bigint:!0},((s,c)=>s?"ENOENT"===s.code?o():o(s):hr(r,c)?o(new Error(fr(t,n,i))):e(t,r,a,i,o)))},checkParentPathsSync:function e(t,r,n,i){const o=cr.resolve(cr.dirname(t)),s=cr.resolve(cr.dirname(n));if(s===o||s===cr.parse(s).root)return;let a;try{a=ar.statSync(s,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(hr(r,a))throw new Error(fr(t,n,i));return e(t,r,s,i)},isSrcSubdir:dr,areIdentical:hr};const mr=Rt,gr=_.default,yr=nr.mkdirsSync,wr=sr,vr=pr;function br(e,t,r,n){const i=(n.dereference?mr.statSync:mr.lstatSync)(t);if(i.isDirectory())return function(e,t,r,n,i){return t?_r(r,n,i):function(e,t,r,n){return mr.mkdirSync(r),_r(t,r,n),Sr(r,e)}(e.mode,r,n,i)}(i,e,t,r,n);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function(e,t,r,n,i){return t?function(e,t,r,n){if(n.overwrite)return mr.unlinkSync(r),Er(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,n,i):Er(e,r,n,i)}(i,e,t,r,n);if(i.isSymbolicLink())return function(e,t,r,n){let i=mr.readlinkSync(t);n.dereference&&(i=gr.resolve(process.cwd(),i));if(e){let e;try{e=mr.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return mr.symlinkSync(i,r);throw e}if(n.dereference&&(e=gr.resolve(process.cwd(),e)),vr.isSrcSubdir(i,e))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${e}'.`);if(mr.statSync(r).isDirectory()&&vr.isSrcSubdir(e,i))throw new Error(`Cannot overwrite '${e}' with '${i}'.`);return function(e,t){return mr.unlinkSync(t),mr.symlinkSync(e,t)}(i,r)}return mr.symlinkSync(i,r)}(e,t,r,n);if(i.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(i.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function Er(e,t,r,n){return mr.copyFileSync(t,r),n.preserveTimestamps&&function(e,t,r){(function(e){return 0==(128&e)})(e)&&function(e,t){Sr(e,128|t)}(r,e);(function(e,t){const r=mr.statSync(e);wr(t,r.atime,r.mtime)})(t,r)}(e.mode,t,r),Sr(r,e.mode)}function Sr(e,t){return mr.chmodSync(e,t)}function _r(e,t,r){mr.readdirSync(e).forEach((n=>function(e,t,r,n){const i=gr.join(t,e),o=gr.join(r,e),{destStat:s}=vr.checkPathsSync(i,o,"copy",n);return function(e,t,r,n){if(!n.filter||n.filter(t,r))return br(e,t,r,n)}(s,i,o,n)}(n,e,t,r)))}var Cr=function(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:n,destStat:i}=vr.checkPathsSync(e,t,"copy",r);return vr.checkParentPathsSync(e,n,t,"copy"),function(e,t,r,n){if(n.filter&&!n.filter(t,r))return;const i=gr.dirname(r);mr.existsSync(i)||yr(i);return br(e,t,r,n)}(i,e,t,r)},xr={copySync:Cr};const Or=bt.fromPromise,kr=vt;var Fr={pathExists:Or((function(e){return kr.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:kr.existsSync};const $r=Rt,Ar=_.default,Pr=nr.mkdirs,Nr=Fr.pathExists,Ir=or,Lr=pr;function Tr(e,t,r,n,i){const o=Ar.dirname(r);Nr(o,((s,a)=>s?i(s):a?jr(e,t,r,n,i):void Pr(o,(o=>o?i(o):jr(e,t,r,n,i)))))}function Dr(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then((s=>s?e(t,r,n,i,o):o()),(e=>o(e)))}function jr(e,t,r,n,i){(n.dereference?$r.stat:$r.lstat)(t,((o,s)=>o?i(o):s.isDirectory()?function(e,t,r,n,i,o){return t?zr(r,n,i,o):function(e,t,r,n,i){$r.mkdir(r,(o=>{if(o)return i(o);zr(t,r,n,(t=>t?i(t):Hr(r,e,i)))}))}(e.mode,r,n,i,o)}(s,e,t,r,n,i):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?function(e,t,r,n,i,o){return t?function(e,t,r,n,i){if(!n.overwrite)return n.errorOnExist?i(new Error(`'${r}' already exists`)):i();$r.unlink(r,(o=>o?i(o):Br(e,t,r,n,i)))}(e,r,n,i,o):Br(e,r,n,i,o)}(s,e,t,r,n,i):s.isSymbolicLink()?function(e,t,r,n,i){$r.readlink(t,((t,o)=>t?i(t):(n.dereference&&(o=Ar.resolve(process.cwd(),o)),e?void $r.readlink(r,((t,s)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?$r.symlink(o,r,i):i(t):(n.dereference&&(s=Ar.resolve(process.cwd(),s)),Lr.isSrcSubdir(o,s)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${s}'.`)):e.isDirectory()&&Lr.isSrcSubdir(s,o)?i(new Error(`Cannot overwrite '${s}' with '${o}'.`)):function(e,t,r){$r.unlink(t,(n=>n?r(n):$r.symlink(e,t,r)))}(o,r,i)))):$r.symlink(o,r,i))))}(e,t,r,n,i):s.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):s.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`))))}function Br(e,t,r,n,i){$r.copyFile(t,r,(o=>o?i(o):n.preserveTimestamps?function(e,t,r,n){if(function(e){return 0==(128&e)}(e))return function(e,t,r){return Hr(e,128|t,r)}(r,e,(i=>i?n(i):Mr(e,t,r,n)));return Mr(e,t,r,n)}(e.mode,t,r,i):Hr(r,e.mode,i)))}function Mr(e,t,r,n){!function(e,t,r){$r.stat(e,((e,n)=>e?r(e):Ir(t,n.atime,n.mtime,r)))}(t,r,(t=>t?n(t):Hr(r,e,n)))}function Hr(e,t,r){return $r.chmod(e,t,r)}function zr(e,t,r,n){$r.readdir(e,((i,o)=>i?n(i):Rr(o,e,t,r,n)))}function Rr(e,t,r,n,i){const o=e.pop();return o?function(e,t,r,n,i,o){const s=Ar.join(r,t),a=Ar.join(n,t);Lr.checkPaths(s,a,"copy",i,((t,c)=>{if(t)return o(t);const{destStat:u}=c;!function(e,t,r,n,i){n.filter?Dr(jr,e,t,r,n,i):jr(e,t,r,n,i)}(u,s,a,i,(t=>t?o(t):Rr(e,r,n,i,o)))}))}(e,o,t,r,n,i):i()}var Ur=function(e,t,r,n){"function"!=typeof r||n?"function"==typeof r&&(r={filter:r}):(n=r,r={}),n=n||function(){},(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),Lr.checkPaths(e,t,"copy",r,((i,o)=>{if(i)return n(i);const{srcStat:s,destStat:a}=o;Lr.checkParentPaths(e,s,t,"copy",(i=>i?n(i):r.filter?Dr(Tr,a,e,t,r,n):Tr(a,e,t,r,n)))}))};var Vr={copy:(0,bt.fromCallback)(Ur)};const qr=Rt,Wr=_.default,Gr=P.default,Jr="win32"===process.platform;function Yr(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||qr[t],e[t+="Sync"]=e[t]||qr[t]})),e.maxBusyTries=e.maxBusyTries||3}function Kr(e,t,r){let n=0;"function"==typeof t&&(r=t,t={}),Gr(e,"rimraf: missing path"),Gr.strictEqual(typeof e,"string","rimraf: path should be a string"),Gr.strictEqual(typeof r,"function","rimraf: callback function required"),Gr(t,"rimraf: invalid options argument provided"),Gr.strictEqual(typeof t,"object","rimraf: options should be object"),Yr(t),Xr(e,t,(function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&n<t.maxBusyTries){n++;return setTimeout((()=>Xr(e,t,i)),100*n)}"ENOENT"===o.code&&(o=null)}r(o)}))}function Xr(e,t,r){Gr(e),Gr(t),Gr("function"==typeof r),t.lstat(e,((n,i)=>n&&"ENOENT"===n.code?r(null):n&&"EPERM"===n.code&&Jr?Zr(e,t,n,r):i&&i.isDirectory()?en(e,t,n,r):void t.unlink(e,(n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return Jr?Zr(e,t,n,r):en(e,t,n,r);if("EISDIR"===n.code)return en(e,t,n,r)}return r(n)}))))}function Zr(e,t,r,n){Gr(e),Gr(t),Gr("function"==typeof n),t.chmod(e,438,(i=>{i?n("ENOENT"===i.code?null:r):t.stat(e,((i,o)=>{i?n("ENOENT"===i.code?null:r):o.isDirectory()?en(e,t,r,n):t.unlink(e,n)}))}))}function Qr(e,t,r){let n;Gr(e),Gr(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}try{n=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}n.isDirectory()?rn(e,t,r):t.unlinkSync(e)}function en(e,t,r,n){Gr(e),Gr(t),Gr("function"==typeof n),t.rmdir(e,(i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?n(r):n(i):function(e,t,r){Gr(e),Gr(t),Gr("function"==typeof r),t.readdir(e,((n,i)=>{if(n)return r(n);let o,s=i.length;if(0===s)return t.rmdir(e,r);i.forEach((n=>{Kr(Wr.join(e,n),t,(n=>{if(!o)return n?r(o=n):void(0==--s&&t.rmdir(e,r))}))}))}))}(e,t,n)}))}function tn(e,t){let r;Yr(t=t||{}),Gr(e,"rimraf: missing path"),Gr.strictEqual(typeof e,"string","rimraf: path should be a string"),Gr(t,"rimraf: missing options"),Gr.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&Jr&&Qr(e,t,r)}try{r&&r.isDirectory()?rn(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return Jr?Qr(e,t,r):rn(e,t,r);if("EISDIR"!==r.code)throw r;rn(e,t,r)}}function rn(e,t,r){Gr(e),Gr(t);try{t.rmdirSync(e)}catch(n){if("ENOTDIR"===n.code)throw r;if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)!function(e,t){if(Gr(e),Gr(t),t.readdirSync(e).forEach((r=>tn(Wr.join(e,r),t))),!Jr){return t.rmdirSync(e,t)}{const r=Date.now();do{try{return t.rmdirSync(e,t)}catch{}}while(Date.now()-r<500)}}(e,t);else if("ENOENT"!==n.code)throw n}}var nn=Kr;Kr.sync=tn;const on=Rt,sn=bt.fromCallback,an=nn;var cn={remove:sn((function(e,t){if(on.rm)return on.rm(e,{recursive:!0,force:!0},t);an(e,t)})),removeSync:function(e){if(on.rmSync)return on.rmSync(e,{recursive:!0,force:!0});an.sync(e)}};const un=bt.fromPromise,ln=vt,hn=_.default,dn=nr,fn=cn,pn=un((async function(e){let t;try{t=await ln.readdir(e)}catch{return dn.mkdirs(e)}return Promise.all(t.map((t=>fn.remove(hn.join(e,t)))))}));function mn(e){let t;try{t=ln.readdirSync(e)}catch{return dn.mkdirsSync(e)}t.forEach((t=>{t=hn.join(e,t),fn.removeSync(t)}))}var gn={emptyDirSync:mn,emptydirSync:mn,emptyDir:pn,emptydir:pn};const yn=bt.fromCallback,wn=_.default,vn=Rt,bn=nr;var En={createFile:yn((function(e,t){function r(){vn.writeFile(e,"",(e=>{if(e)return t(e);t()}))}vn.stat(e,((n,i)=>{if(!n&&i.isFile())return t();const o=wn.dirname(e);vn.stat(o,((e,n)=>{if(e)return"ENOENT"===e.code?bn.mkdirs(o,(e=>{if(e)return t(e);r()})):t(e);n.isDirectory()?r():vn.readdir(o,(e=>{if(e)return t(e)}))}))}))})),createFileSync:function(e){let t;try{t=vn.statSync(e)}catch{}if(t&&t.isFile())return;const r=wn.dirname(e);try{vn.statSync(r).isDirectory()||vn.readdirSync(r)}catch(e){if(!e||"ENOENT"!==e.code)throw e;bn.mkdirsSync(r)}vn.writeFileSync(e,"")}};const Sn=bt.fromCallback,_n=_.default,Cn=Rt,xn=nr,On=Fr.pathExists,{areIdentical:kn}=pr;var Fn={createLink:Sn((function(e,t,r){function n(e,t){Cn.link(e,t,(e=>{if(e)return r(e);r(null)}))}Cn.lstat(t,((i,o)=>{Cn.lstat(e,((i,s)=>{if(i)return i.message=i.message.replace("lstat","ensureLink"),r(i);if(o&&kn(s,o))return r(null);const a=_n.dirname(t);On(a,((i,o)=>i?r(i):o?n(e,t):void xn.mkdirs(a,(i=>{if(i)return r(i);n(e,t)}))))}))}))})),createLinkSync:function(e,t){let r;try{r=Cn.lstatSync(t)}catch{}try{const t=Cn.lstatSync(e);if(r&&kn(t,r))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=_n.dirname(t);return Cn.existsSync(n)||xn.mkdirsSync(n),Cn.linkSync(e,t)}};const $n=_.default,An=Rt,Pn=Fr.pathExists;var Nn={symlinkPaths:function(e,t,r){if($n.isAbsolute(e))return An.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:e})));{const n=$n.dirname(t),i=$n.join(n,e);return Pn(i,((t,o)=>t?r(t):o?r(null,{toCwd:i,toDst:e}):An.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:$n.relative(n,e)})))))}},symlinkPathsSync:function(e,t){let r;if($n.isAbsolute(e)){if(r=An.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const n=$n.dirname(t),i=$n.join(n,e);if(r=An.existsSync(i),r)return{toCwd:i,toDst:e};if(r=An.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:$n.relative(n,e)}}}};const In=Rt;var Ln={symlinkType:function(e,t,r){if(r="function"==typeof t?t:r,t="function"!=typeof t&&t)return r(null,t);In.lstat(e,((e,n)=>{if(e)return r(null,"file");t=n&&n.isDirectory()?"dir":"file",r(null,t)}))},symlinkTypeSync:function(e,t){let r;if(t)return t;try{r=In.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}};const Tn=bt.fromCallback,Dn=_.default,jn=vt,Bn=nr.mkdirs,Mn=nr.mkdirsSync,Hn=Nn.symlinkPaths,zn=Nn.symlinkPathsSync,Rn=Ln.symlinkType,Un=Ln.symlinkTypeSync,Vn=Fr.pathExists,{areIdentical:qn}=pr;function Wn(e,t,r,n){Hn(e,t,((i,o)=>{if(i)return n(i);e=o.toDst,Rn(o.toCwd,r,((r,i)=>{if(r)return n(r);const o=Dn.dirname(t);Vn(o,((r,s)=>r?n(r):s?jn.symlink(e,t,i,n):void Bn(o,(r=>{if(r)return n(r);jn.symlink(e,t,i,n)}))))}))}))}var Gn={createSymlink:Tn((function(e,t,r,n){n="function"==typeof r?r:n,r="function"!=typeof r&&r,jn.lstat(t,((i,o)=>{!i&&o.isSymbolicLink()?Promise.all([jn.stat(e),jn.stat(t)]).then((([i,o])=>{if(qn(i,o))return n(null);Wn(e,t,r,n)})):Wn(e,t,r,n)}))})),createSymlinkSync:function(e,t,r){let n;try{n=jn.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const r=jn.statSync(e),n=jn.statSync(t);if(qn(r,n))return}const i=zn(e,t);e=i.toDst,r=Un(i.toCwd,r);const o=Dn.dirname(t);return jn.existsSync(o)||Mn(o),jn.symlinkSync(e,t,r)}};var Jn={createFile:En.createFile,createFileSync:En.createFileSync,ensureFile:En.createFile,ensureFileSync:En.createFileSync,createLink:Fn.createLink,createLinkSync:Fn.createLinkSync,ensureLink:Fn.createLink,ensureLinkSync:Fn.createLinkSync,createSymlink:Gn.createSymlink,createSymlinkSync:Gn.createSymlinkSync,ensureSymlink:Gn.createSymlink,ensureSymlinkSync:Gn.createSymlinkSync};var Yn={stringify:function(e,{EOL:t="\n",finalEOL:r=!0,replacer:n=null,spaces:i}={}){const o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}};let Kn;try{Kn=require("graceful-fs")}catch(e){Kn=C.default}const Xn=bt,{stringify:Zn,stripBom:Qn}=Yn;const ei=Xn.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||Kn,n=!("throws"in t)||t.throws;let i,o=await Xn.fromCallback(r.readFile)(e,t);o=Qn(o);try{i=JSON.parse(o,t?t.reviver:null)}catch(t){if(n)throw t.message=`${e}: ${t.message}`,t;return null}return i}));const ti=Xn.fromPromise((async function(e,t,r={}){const n=r.fs||Kn,i=Zn(t,r);await Xn.fromCallback(n.writeFile)(e,i,r)}));const ri={readFile:ei,readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||Kn,n=!("throws"in t)||t.throws;try{let n=r.readFileSync(e,t);return n=Qn(n),JSON.parse(n,t.reviver)}catch(t){if(n)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:ti,writeFileSync:function(e,t,r={}){const n=r.fs||Kn,i=Zn(t,r);return n.writeFileSync(e,i,r)}};var ni={readJson:ri.readFile,readJsonSync:ri.readFileSync,writeJson:ri.writeFile,writeJsonSync:ri.writeFileSync};const ii=bt.fromCallback,oi=Rt,si=_.default,ai=nr,ci=Fr.pathExists;var ui={outputFile:ii((function(e,t,r,n){"function"==typeof r&&(n=r,r="utf8");const i=si.dirname(e);ci(i,((o,s)=>o?n(o):s?oi.writeFile(e,t,r,n):void ai.mkdirs(i,(i=>{if(i)return n(i);oi.writeFile(e,t,r,n)}))))})),outputFileSync:function(e,...t){const r=si.dirname(e);if(oi.existsSync(r))return oi.writeFileSync(e,...t);ai.mkdirsSync(r),oi.writeFileSync(e,...t)}};const{stringify:li}=Yn,{outputFile:hi}=ui;var di=async function(e,t,r={}){const n=li(t,r);await hi(e,n,r)};const{stringify:fi}=Yn,{outputFileSync:pi}=ui;var mi=function(e,t,r){const n=fi(t,r);pi(e,n,r)};const gi=bt.fromPromise,yi=ni;yi.outputJson=gi(di),yi.outputJsonSync=mi,yi.outputJSON=yi.outputJson,yi.outputJSONSync=yi.outputJsonSync,yi.writeJSON=yi.writeJson,yi.writeJSONSync=yi.writeJsonSync,yi.readJSON=yi.readJson,yi.readJSONSync=yi.readJsonSync;var wi=yi;const vi=Rt,bi=_.default,Ei=xr.copySync,Si=cn.removeSync,_i=nr.mkdirpSync,Ci=pr;function xi(e,t,r){try{vi.renameSync(e,t)}catch(n){if("EXDEV"!==n.code)throw n;return function(e,t,r){return Ei(e,t,{overwrite:r,errorOnExist:true}),Si(e)}(e,t,r)}}var Oi=function(e,t,r){const n=(r=r||{}).overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Ci.checkPathsSync(e,t,"move",r);return Ci.checkParentPathsSync(e,i,t,"move"),function(e){const t=bi.dirname(e);return bi.parse(t).root===t}(t)||_i(bi.dirname(t)),function(e,t,r,n){if(n)return xi(e,t,r);if(r)return Si(t),xi(e,t,r);if(vi.existsSync(t))throw new Error("dest already exists.");return xi(e,t,r)}(e,t,n,o)},ki={moveSync:Oi};const Fi=Rt,$i=_.default,Ai=Vr.copy,Pi=cn.remove,Ni=nr.mkdirp,Ii=Fr.pathExists,Li=pr;function Ti(e,t,r,n,i){return n?Di(e,t,r,i):r?Pi(t,(n=>n?i(n):Di(e,t,r,i))):void Ii(t,((n,o)=>n?i(n):o?i(new Error("dest already exists.")):Di(e,t,r,i)))}function Di(e,t,r,n){Fi.rename(e,t,(i=>i?"EXDEV"!==i.code?n(i):function(e,t,r,n){Ai(e,t,{overwrite:r,errorOnExist:!0},(t=>t?n(t):Pi(e,n)))}(e,t,r,n):n()))}var ji=function(e,t,r,n){"function"==typeof r&&(n=r,r={});const i=r.overwrite||r.clobber||!1;Li.checkPaths(e,t,"move",r,((r,o)=>{if(r)return n(r);const{srcStat:s,isChangingCase:a=!1}=o;Li.checkParentPaths(e,s,t,"move",(r=>r?n(r):function(e){const t=$i.dirname(e);return $i.parse(t).root===t}(t)?Ti(e,t,i,a,n):void Ni($i.dirname(t),(r=>r?n(r):Ti(e,t,i,a,n)))))}))};var Bi={move:(0,bt.fromCallback)(ji)},Mi={...vt,...xr,...Vr,...gn,...Jn,...wi,...nr,...ki,...Bi,...ui,...Fr,...cn},Hi={},zi={exports:{}},Ri={exports:{}},Ui=1e3,Vi=60*Ui,qi=60*Vi,Wi=24*qi,Gi=7*Wi,Ji=365.25*Wi,Yi=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*Ji;case"weeks":case"week":case"w":return r*Gi;case"days":case"day":case"d":return r*Wi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*qi;case"minutes":case"minute":case"mins":case"min":case"m":return r*Vi;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ui;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=Wi)return Ki(e,t,Wi,"day");if(t>=qi)return Ki(e,t,qi,"hour");if(t>=Vi)return Ki(e,t,Vi,"minute");if(t>=Ui)return Ki(e,t,Ui,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=Wi)return Math.round(e/Wi)+"d";if(t>=qi)return Math.round(e/qi)+"h";if(t>=Vi)return Math.round(e/Vi)+"m";if(t>=Ui)return Math.round(e/Ui)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Ki(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}var Xi=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=Yi,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=Xi(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(Ri,Ri.exports);var Zi={exports:{}};!function(e,t){const r=O.default,n=A.default;t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(n.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=n.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=require("supports-color");e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=Xi(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}}(Zi,Zi.exports),"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?zi.exports=Ri.exports:zi.exports=Zi.exports;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.default=function(e){return function(t,r){return new Promise(((n,i)=>{e.call(this,t,r,((e,t)=>{e?i(e):n(t)}))}))}};var eo=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const to=E.default,ro=eo(zi.exports),no=eo(Qi),io=ro.default("agent-base");function oo(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function so(e,t){return new so.Agent(e,t)}!function(e){class t extends to.EventEmitter{constructor(e,t){super();let r=t;"function"==typeof e?this.callback=e:e&&(r=e),this.timeout=null,r&&"number"==typeof r.timeout&&(this.timeout=r.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:oo()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:oo()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,r){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const r=Object.assign({},t);"boolean"!=typeof r.secureEndpoint&&(r.secureEndpoint=oo()),null==r.host&&(r.host="localhost"),null==r.port&&(r.port=r.secureEndpoint?443:80),null==r.protocol&&(r.protocol=r.secureEndpoint?"https:":"http:"),r.host&&r.path&&delete r.path,delete r.agent,delete r.hostname,delete r._defaultAgent,delete r.defaultPort,delete r.createConnection,e._last=!0,e.shouldKeepAlive=!1;let n=!1,i=null;const o=r.timeout||this.timeout,s=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},a=()=>{i=null,n=!0;const e=new Error(`A "socket" was not created for HTTP request before ${o}ms`);e.code="ETIMEOUT",s(e)},c=e=>{n||(null!==i&&(clearTimeout(i),i=null),s(e))},u=t=>{if(n)return;if(null!=i&&(clearTimeout(i),i=null),o=t,Boolean(o)&&"function"==typeof o.addRequest)return io("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,r);var o;if(t)return t.once("free",(()=>{this.freeSocket(t,r)})),void e.onSocket(t);const a=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);s(a)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(io("Converting legacy callback function to promise"),this.promisifiedCallback=no.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof o&&o>0&&(i=setTimeout(a,o)),"port"in r&&"number"!=typeof r.port&&(r.port=Number(r.port));try{io("Resolving socket for %o request: %o",r.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,r)).then(u,c)}catch(e){Promise.reject(e).catch(c)}}else s(new Error("`callback` is not defined"))}freeSocket(e,t){io("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){io("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(so||(so={}));var ao=so,co={},uo=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(co,"__esModule",{value:!0});const lo=uo(zi.exports).default("https-proxy-agent:parse-proxy-response");co.default=function(e){return new Promise(((t,r)=>{let n=0;const i=[];function o(){const r=e.read();r?function(e){i.push(e),n+=e.length;const r=Buffer.concat(i,n);if(-1===r.indexOf("\r\n\r\n"))return lo("have not received end of HTTP headers yet..."),void o();const s=r.toString("ascii",0,r.indexOf("\r\n")),a=+s.split(" ")[1];lo("got proxy server response: %o",s),t({statusCode:a,buffered:r})}(r):e.once("readable",o)}function s(e){lo("onclose had error %o",e)}function a(){lo("onend")}function c(t){e.removeListener("end",a),e.removeListener("error",c),e.removeListener("close",s),e.removeListener("readable",o),lo("onerror %o",t),r(t)}e.on("error",c),e.on("close",s),e.on("end",a),o()}))};var ho=H&&H.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},fo=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hi,"__esModule",{value:!0});const po=fo(L.default),mo=fo(T.default),go=fo(N.default),yo=fo(P.default),wo=fo(zi.exports),vo=ao,bo=fo(co),Eo=wo.default("https-proxy-agent:agent");class So extends vo.Agent{constructor(e){let t;if(t="string"==typeof e?go.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Eo("creating new HttpsProxyAgent instance: %o",t),super(t);const r=Object.assign({},t);var n;this.secureProxy=t.secureProxy||"string"==typeof(n=r.protocol)&&/^https:?$/i.test(n),r.host=r.hostname||r.host,"string"==typeof r.port&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in r)&&(r.ALPNProtocols=["http 1.1"]),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(e,t){return ho(this,void 0,void 0,(function*(){const{proxy:r,secureProxy:n}=this;let i;n?(Eo("Creating `tls.Socket`: %o",r),i=mo.default.connect(r)):(Eo("Creating `net.Socket`: %o",r),i=po.default.connect(r));const o=Object.assign({},r.headers);let s=`CONNECT ${`${t.host}:${t.port}`} HTTP/1.1\r\n`;r.auth&&(o["Proxy-Authorization"]=`Basic ${Buffer.from(r.auth).toString("base64")}`);let{host:a,port:c,secureEndpoint:u}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(c,u)||(a+=`:${c}`),o.Host=a,o.Connection="close";for(const e of Object.keys(o))s+=`${e}: ${o[e]}\r\n`;const l=bo.default(i);i.write(`${s}\r\n`);const{statusCode:h,buffered:d}=yield l;if(200===h){if(e.once("socket",_o),t.secureEndpoint){const e=t.servername||t.host;if(!e)throw new Error('Could not determine "servername"');return Eo("Upgrading socket connection to TLS"),mo.default.connect(Object.assign(Object.assign({},function(e,...t){const r={};let n;for(n in e)t.includes(n)||(r[n]=e[n]);return r}(t,"host","hostname","path","port")),{socket:i,servername:e}))}return i}i.destroy();const f=new po.default.Socket;return f.readable=!0,e.once("socket",(e=>{Eo("replaying proxy buffer for failed request"),yo.default(e.listenerCount("data")>0),e.push(d),e.push(null)})),f}))}}function _o(e){e.resume()}Hi.default=So;const Co=(H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(Hi);function xo(e){return new Co.default(e)}!function(e){e.HttpsProxyAgent=Co.default,e.prototype=Co.default.prototype}(xo||(xo={}));var Oo=xo;function ko(e){return Fo(`https://github.com/${e.repo}/archive/main.zip`)}function Fo(e){const t=I.parse(e);if(process.env.https_proxy){const e=new Oo(process.env.https_proxy);t.agent=e}return new Promise(((e,r)=>{l.get(t,(t=>{if(302===t.statusCode)Fo(t.headers.location).then(e,r);else{const n=[];t.on("data",(e=>n.push(e))),t.on("end",(()=>{e(Buffer.concat(n))})),t.on("error",r)}}))}))}var $o={},Ao=Po;function Po(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function No(e){e.pending+=1;var t=!1;return function(n){if(t)throw new Error("callback called twice");if(t=!0,e.error=e.error||n,e.pending-=1,e.waiting.length>0&&e.pending<e.max)Io(e,e.waiting.shift());else if(0===e.pending){var i=e.listeners;e.listeners=[],i.forEach(r)}};function r(t){t(e.error)}}function Io(e,t){t(No(e))}Po.prototype.go=function(e){this.pending<this.max?Io(this,e):this.waiting.push(e)},Po.prototype.wait=function(e){0===this.pending?e(this.error):this.listeners.push(e)},Po.prototype.hold=function(){return No(this)};var Lo=C.default,To=A.default,Do=$.default,jo=Do.Readable,Bo=Do.Writable,Mo=Do.PassThrough,Ho=Ao,zo=E.default.EventEmitter;function Ro(e,t){t=t||{},zo.call(this),this.fd=e,this.pend=new Ho,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}function Uo(e,t){t=t||{},jo.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}function Vo(e,t){t=t||{},Bo.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=null==t.end?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function qo(e,t){zo.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}$o.createFromBuffer=function(e,t){return new qo(e,t)},$o.createFromFd=function(e,t){return new Ro(e,t)},$o.BufferSlicer=qo,$o.FdSlicer=Ro,To.inherits(Ro,zo),Ro.prototype.read=function(e,t,r,n,i){var o=this;o.pend.go((function(s){Lo.read(o.fd,e,t,r,n,(function(e,t,r){s(),i(e,t,r)}))}))},Ro.prototype.write=function(e,t,r,n,i){var o=this;o.pend.go((function(s){Lo.write(o.fd,e,t,r,n,(function(e,t,r){s(),i(e,t,r)}))}))},Ro.prototype.createReadStream=function(e){return new Uo(this,e)},Ro.prototype.createWriteStream=function(e){return new Vo(this,e)},Ro.prototype.ref=function(){this.refCount+=1},Ro.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.autoClose&&Lo.close(e.fd,(function(t){t?e.emit("error",t):e.emit("close")}))}},To.inherits(Uo,jo),Uo.prototype._read=function(e){var t=this;if(!t.destroyed){var r=Math.min(t._readableState.highWaterMark,e);if(null!=t.endOffset&&(r=Math.min(r,t.endOffset-t.pos)),r<=0)return t.destroyed=!0,t.push(null),void t.context.unref();t.context.pend.go((function(e){if(t.destroyed)return e();var n=new Buffer(r);Lo.read(t.context.fd,n,0,r,t.pos,(function(r,i){r?t.destroy(r):0===i?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=i,t.push(n.slice(0,i))),e()}))}))}},Uo.prototype.destroy=function(e){this.destroyed||(e=e||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())},To.inherits(Vo,Bo),Vo.prototype._write=function(e,t,r){var n=this;if(!n.destroyed){if(n.pos+e.length>n.endOffset){var i=new Error("maximum file length exceeded");return i.code="ETOOBIG",n.destroy(),void r(i)}n.context.pend.go((function(t){if(n.destroyed)return t();Lo.write(n.context.fd,e,0,e.length,n.pos,(function(e,i){e?(n.destroy(),t(),r(e)):(n.bytesWritten+=i,n.pos+=i,n.emit("progress"),t(),r())}))}))}},Vo.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},To.inherits(qo,zo),qo.prototype.read=function(e,t,r,n,i){var o=n+r,s=o-this.buffer.length,a=s>0?s:r;this.buffer.copy(e,t,n,o),setImmediate((function(){i(null,a)}))},qo.prototype.write=function(e,t,r,n,i){e.copy(this.buffer,n,t,t+r),setImmediate((function(){i(null,r,e)}))},qo.prototype.createReadStream=function(e){var t=new Mo(e=e||{});t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var r=this.buffer.slice(t.start,t.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=r.length){n<r.length&&t.write(r.slice(n,r.length));break}t.write(r.slice(n,i)),n=i}return t.end(),t.destroy=function(){t.destroyed=!0},t},qo.prototype.createWriteStream=function(e){var t=this,r=new Bo(e=e||{});return r.start=e.start||0,r.endOffset=null==e.end?this.buffer.length:+e.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(e,n,i){if(!r.destroyed){var o=r.pos+e.length;if(o>r.endOffset){var s=new Error("maximum file length exceeded");return s.code="ETOOBIG",r.destroyed=!0,void i(s)}e.copy(t.buffer,r.pos,0,e.length),r.bytesWritten+=e.length,r.pos=o,r.emit("progress"),i()}},r.destroy=function(){r.destroyed=!0},r},qo.prototype.ref=function(){this.refCount+=1},qo.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};var Wo=j.default.Buffer,Go=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function Jo(e){if(Wo.isBuffer(e))return e;var t="function"==typeof Wo.alloc&&"function"==typeof Wo.from;if("number"==typeof e)return t?Wo.alloc(e):new Wo(e);if("string"==typeof e)return t?Wo.from(e):new Wo(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function Yo(e){var t=Jo(4);return t.writeInt32BE(e,0),t}function Ko(e,t){e=Jo(e),Wo.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=-1^~~t,n=0;n<e.length;n++)r=Go[255&(r^e[n])]^r>>>8;return-1^r}function Xo(){return Yo(Ko.apply(null,arguments))}"undefined"!=typeof Int32Array&&(Go=new Int32Array(Go)),Xo.signed=function(){return Ko.apply(null,arguments)},Xo.unsigned=function(){return Ko.apply(null,arguments)>>>0};var Zo=Xo,Qo=D.default,es=$o,ts=Zo,rs=A.default,ns=E.default.EventEmitter,is=$.default.Transform,os=$.default.PassThrough,ss=$.default.Writable,as=function(e,t,r){"function"==typeof t&&(r=t,t=null);null==t&&(t={});t.autoClose=!1,null==t.lazyEntries&&(t.lazyEntries=!1);null==t.decodeStrings&&(t.decodeStrings=!0);null==t.validateEntrySizes&&(t.validateEntrySizes=!0);null==t.strictFileNames&&(t.strictFileNames=!1);!function(e,t,r,n){"function"==typeof r&&(n=r,r=null);null==r&&(r={});null==r.autoClose&&(r.autoClose=!0);null==r.lazyEntries&&(r.lazyEntries=!1);null==r.decodeStrings&&(r.decodeStrings=!0);var i=!!r.decodeStrings;null==r.validateEntrySizes&&(r.validateEntrySizes=!0);null==r.strictFileNames&&(r.strictFileNames=!1);null==n&&(n=vs);if("number"!=typeof t)throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=22,s=65535,a=Math.min(o+s,t),c=gs(a),u=t-c.length;ds(e,c,0,a,u,(function(s){if(s)return n(s);for(var l=a-o;l>=0;l-=1)if(101010256===c.readUInt32LE(l)){var h=c.slice(l),d=h.readUInt16LE(4);if(0!==d)return n(new Error("multi-disk zip files are not supported: found disk number: "+d));var f=h.readUInt16LE(10),p=h.readUInt32LE(16),m=h.readUInt16LE(20),g=h.length-o;if(m!==g)return n(new Error("invalid comment length. expected: "+g+". found: "+m));var y=i?ys(h,22,h.length,!1):h.slice(22);if(65535!==f&&4294967295!==p)return n(null,new cs(e,p,t,f,y,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames));var w=gs(20),v=u+l-w.length;return void ds(e,w,0,w.length,v,(function(o){if(o)return n(o);if(117853008!==w.readUInt32LE(0))return n(new Error("invalid zip64 end of central directory locator signature"));var s=ws(w,8),a=gs(56);ds(e,a,0,a.length,s,(function(o){return o?n(o):101075792!==a.readUInt32LE(0)?n(new Error("invalid zip64 end of central directory record signature")):(f=ws(a,32),p=ws(a,48),n(null,new cs(e,p,t,f,y,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames)))}))}))}n(new Error("end of central directory record signature not found"))}))}(es.createFromBuffer(e,{maxChunkSize:65536}),e.length,t,r)};function cs(e,t,r,n,i,o,s,a,c,u){var l=this;ns.call(l),l.reader=e,l.reader.on("error",(function(e){ls(l,e)})),l.reader.once("close",(function(){l.emit("close")})),l.readEntryCursor=t,l.fileSize=r,l.entryCount=n,l.comment=i,l.entriesRead=0,l.autoClose=!!o,l.lazyEntries=!!s,l.decodeStrings=!!a,l.validateEntrySizes=!!c,l.strictFileNames=!!u,l.isOpen=!0,l.emittedError=!1,l.lazyEntries||l._readEntry()}function us(e,t){e.autoClose&&e.close(),ls(e,t)}function ls(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}function hs(){}function ds(e,t,r,n,i,o){if(0===n)return setImmediate((function(){o(null,gs(0))}));e.read(t,r,n,i,(function(e,t){return e?o(e):t<n?o(new Error("unexpected EOF")):void o()}))}function fs(e){is.call(this),this.actualByteCount=0,this.expectedByteCount=e}function ps(){ns.call(this),this.refCount=0}function ms(e){os.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}rs.inherits(cs,ns),cs.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},cs.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},cs.prototype._readEntry=function(){var e=this;if(e.entryCount!==e.entriesRead){if(!e.emittedError){var t=gs(46);ds(e.reader,t,0,t.length,e.readEntryCursor,(function(r){if(r)return us(e,r);if(!e.emittedError){var n=new hs,i=t.readUInt32LE(0);if(33639248!==i)return us(e,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=t.readUInt16LE(4),n.versionNeededToExtract=t.readUInt16LE(6),n.generalPurposeBitFlag=t.readUInt16LE(8),n.compressionMethod=t.readUInt16LE(10),n.lastModFileTime=t.readUInt16LE(12),n.lastModFileDate=t.readUInt16LE(14),n.crc32=t.readUInt32LE(16),n.compressedSize=t.readUInt32LE(20),n.uncompressedSize=t.readUInt32LE(24),n.fileNameLength=t.readUInt16LE(28),n.extraFieldLength=t.readUInt16LE(30),n.fileCommentLength=t.readUInt16LE(32),n.internalFileAttributes=t.readUInt16LE(36),n.externalFileAttributes=t.readUInt32LE(38),n.relativeOffsetOfLocalHeader=t.readUInt32LE(42),64&n.generalPurposeBitFlag)return us(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46,t=gs(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),ds(e.reader,t,0,t.length,e.readEntryCursor,(function(r){if(r)return us(e,r);if(!e.emittedError){var i=0!=(2048&n.generalPurposeBitFlag);n.fileName=e.decodeStrings?ys(t,0,n.fileNameLength,i):t.slice(0,n.fileNameLength);var o=n.fileNameLength+n.extraFieldLength,s=t.slice(n.fileNameLength,o);n.extraFields=[];for(var a=0;a<s.length-3;){var c=s.readUInt16LE(a+0),u=s.readUInt16LE(a+2),l=a+4,h=l+u;if(h>s.length)return us(e,new Error("extra field length exceeds extra field buffer size"));var d=gs(u);s.copy(d,0,l,h),n.extraFields.push({id:c,data:d}),a=h}if(n.fileComment=e.decodeStrings?ys(t,o,o+n.fileCommentLength,i):t.slice(o,o+n.fileCommentLength),n.comment=n.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,4294967295===n.uncompressedSize||4294967295===n.compressedSize||4294967295===n.relativeOffsetOfLocalHeader){var f=null;for(a=0;a<n.extraFields.length;a++){if(1===(m=n.extraFields[a]).id){f=m.data;break}}if(null==f)return us(e,new Error("expected zip64 extended information extra field"));var p=0;if(4294967295===n.uncompressedSize){if(p+8>f.length)return us(e,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=ws(f,p),p+=8}if(4294967295===n.compressedSize){if(p+8>f.length)return us(e,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=ws(f,p),p+=8}if(4294967295===n.relativeOffsetOfLocalHeader){if(p+8>f.length)return us(e,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=ws(f,p),p+=8}}if(e.decodeStrings)for(a=0;a<n.extraFields.length;a++){var m;if(28789===(m=n.extraFields[a]).id){if(m.data.length<6)continue;if(1!==m.data.readUInt8(0))continue;var g=m.data.readUInt32LE(1);if(ts.unsigned(t.slice(0,n.fileNameLength))!==g)continue;n.fileName=ys(m.data,5,m.data.length,!0);break}}if(e.validateEntrySizes&&0===n.compressionMethod){var y=n.uncompressedSize;if(n.isEncrypted()&&(y+=12),n.compressedSize!==y){var w="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return us(e,new Error(w))}}if(e.decodeStrings){e.strictFileNames||(n.fileName=n.fileName.replace(/\\/g,"/"));var v=function(e){if(-1!==e.indexOf("\\"))return"invalid characters in fileName: "+e;if(/^[a-zA-Z]:/.test(e)||/^\//.test(e))return"absolute path: "+e;if(-1!==e.split("/").indexOf(".."))return"invalid relative path: "+e;return null}(n.fileName,e.validateFileNameOptions);if(null!=v)return us(e,new Error(v))}e.emit("entry",n),e.lazyEntries||e._readEntry()}}))}}))}}else setImmediate((function(){e.autoClose&&e.close(),e.emittedError||e.emit("end")}))},cs.prototype.openReadStream=function(e,t,r){var n=this,i=0,o=e.compressedSize;if(null==r)r=t,t={};else{if(null!=t.decrypt){if(!e.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(!1!==t.decrypt)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&!1!==t.decompress)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=t.decompress){if(!e.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!1!==t.decompress&&!0!==t.decompress)throw new Error("invalid options.decompress value: "+t.decompress)}if(null!=t.start||null!=t.end){if(e.isCompressed()&&!1!==t.decompress)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&!1!==t.decrypt)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=t.start){if((i=t.start)<0)throw new Error("options.start < 0");if(i>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(null!=t.end){if((o=t.end)<0)throw new Error("options.end < 0");if(o>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(o<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return r(new Error("closed"));if(e.isEncrypted()&&!1!==t.decrypt)return r(new Error("entry is encrypted, and options.decrypt !== false"));n.reader.ref();var s=gs(30);ds(n.reader,s,0,s.length,e.relativeOffsetOfLocalHeader,(function(a){try{if(a)return r(a);var c=s.readUInt32LE(0);if(67324752!==c)return r(new Error("invalid local file header signature: 0x"+c.toString(16)));var u,l=s.readUInt16LE(26),h=s.readUInt16LE(28),d=e.relativeOffsetOfLocalHeader+s.length+l+h;if(0===e.compressionMethod)u=!1;else{if(8!==e.compressionMethod)return r(new Error("unsupported compression method: "+e.compressionMethod));u=null==t.decompress||t.decompress}var f=d,p=f+e.compressedSize;if(0!==e.compressedSize&&p>n.fileSize)return r(new Error("file data overflows file bounds: "+f+" + "+e.compressedSize+" > "+n.fileSize));var m=n.reader.createReadStream({start:f+i,end:f+o}),g=m;if(u){var y=!1,w=Qo.createInflateRaw();m.on("error",(function(e){setImmediate((function(){y||w.emit("error",e)}))})),m.pipe(w),n.validateEntrySizes?(g=new fs(e.uncompressedSize),w.on("error",(function(e){setImmediate((function(){y||g.emit("error",e)}))})),w.pipe(g)):g=w,g.destroy=function(){y=!0,w!==g&&w.unpipe(g),m.unpipe(w),m.destroy()}}r(null,g)}finally{n.reader.unref()}}))},hs.prototype.getLastModDate=function(){return e=this.lastModFileDate,t=this.lastModFileTime,new Date(1980+(e>>9&127),(e>>5&15)-1,31&e,t>>11&31,t>>5&63,2*(31&t),0);var e,t},hs.prototype.isEncrypted=function(){return 0!=(1&this.generalPurposeBitFlag)},hs.prototype.isCompressed=function(){return 8===this.compressionMethod},rs.inherits(fs,is),fs.prototype._transform=function(e,t,r){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(n))}r(null,e)},fs.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()},rs.inherits(ps,ns),ps.prototype.ref=function(){this.refCount+=1},ps.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.close((function(t){if(t)return e.emit("error",t);e.emit("close")}))}},ps.prototype.createReadStream=function(e){var t=e.start,r=e.end;if(t===r){var n=new os;return setImmediate((function(){n.end()})),n}var i=this._readStreamForRange(t,r),o=!1,s=new ms(this);i.on("error",(function(e){setImmediate((function(){o||s.emit("error",e)}))})),s.destroy=function(){i.unpipe(s),s.unref(),i.destroy()};var a=new fs(r-t);return s.on("error",(function(e){setImmediate((function(){o||a.emit("error",e)}))})),a.destroy=function(){o=!0,s.unpipe(a),s.destroy()},i.pipe(s).pipe(a)},ps.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")},ps.prototype.read=function(e,t,r,n,i){var o=this.createReadStream({start:n,end:n+r}),s=new ss,a=0;s._write=function(r,n,i){r.copy(e,t+a,0,r.length),a+=r.length,i()},s.on("finish",i),o.on("error",(function(e){i(e)})),o.pipe(s)},ps.prototype.close=function(e){setImmediate(e)},rs.inherits(ms,os),ms.prototype._flush=function(e){this.unref(),e()},ms.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var gs;function ys(e,t,r,n){if(n)return e.toString("utf8",t,r);for(var i="",o=t;o<r;o++)i+="\0â˜ºâ˜»â™¥â™¦â™£â™ â€¢â—˜â—‹â—™â™‚â™€â™ªâ™«â˜¼â–ºâ—„â†•â€¼Â¶Â§â–¬â†¨â†‘â†“â†’â†âˆŸâ†”â–²â–¼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~âŒ‚Ã‡Ã¼Ã©Ã¢Ã¤Ã Ã¥Ã§ÃªÃ«Ã¨Ã¯Ã®Ã¬Ã„Ã…Ã‰Ã¦Ã†Ã´Ã¶Ã²Ã»Ã¹Ã¿Ã–ÃœÂ¢Â£Â¥â‚§Æ’Ã¡Ã­Ã³ÃºÃ±Ã‘ÂªÂºÂ¿âŒÂ¬Â½Â¼Â¡Â«Â»â–‘â–’â–“â”‚â”¤â•¡â•¢â•–â••â•£â•‘â•—â•â•œâ•›â”â””â”´â”¬â”œâ”€â”¼â•žâ•Ÿâ•šâ•”â•©â•¦â• â•â•¬â•§â•¨â•¤â•¥â•™â•˜â•’â•“â•«â•ªâ”˜â”Œâ–ˆâ–„â–Œâ–â–€Î±ÃŸÎ“Ï€Î£ÏƒÂµÏ„Î¦Î˜Î©Î´âˆžÏ†Îµâˆ©â‰¡Â±â‰¥â‰¤âŒ âŒ¡Ã·â‰ˆÂ°âˆ™Â·âˆšâ¿Â²â– Â "[e[o]];return i}function ws(e,t){var r=e.readUInt32LE(t);return 4294967296*e.readUInt32LE(t+4)+r}function vs(e){if(e)throw e}function bs(e,t,r){const n=r?r.split("/"):[];return new Promise(((r,i)=>{as(e,{lazyEntries:!0},function(e,t,r,n){return(i,o)=>{if(i)throw i;o.readEntry(),o.on("entry",(r=>{const n=r.fileName.split("/");let i=Math.min(t.length,n.length-1);for(let e=0;e<i;e++)if(n[e+1]!==t[e])return void o.readEntry();if(r.fileName[r.fileName.length-1]===_.default.sep)o.readEntry();else if(n.length>t.length+1){n[0]=e,n.splice(1,t.length);const i=n.join(_.default.sep);Es(_.default.dirname(i),(()=>{o.openReadStream(r,((e,t)=>{if(e)throw e;t.on("end",(()=>{o.readEntry()})),t.pipe(C.default.createWriteStream(i))}))}))}else o.readEntry()})),o.once("error",n),o.once("end",(()=>{r()}))}}(t,n,r,i))}))}function Es(e,t){if("."===e)return t();C.default.stat(e,(r=>{if(null==r)return t();Es(_.default.dirname(e),(()=>{C.default.mkdir(e,t)}))}))}function Ss(e){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),r=new RegExp(t,"g");return"string"==typeof e?e.replace(r,""):e}gs="function"==typeof Buffer.allocUnsafe?function(e){return Buffer.allocUnsafe(e)}:function(e){return new Buffer(e)};const _s={to:(e,t)=>t?`[${t+1};${e+1}H`:`[${e+1}G`,move(e,t){let r="";return e<0?r+=`[${-e}D`:e>0&&(r+=`[${e}C`),t<0?r+=`[${-t}A`:t>0&&(r+=`[${t}B`),r},up:(e=1)=>`[${e}A`,down:(e=1)=>`[${e}B`,forward:(e=1)=>`[${e}C`,backward:(e=1)=>`[${e}D`,nextLine:(e=1)=>"[E".repeat(e),prevLine:(e=1)=>"[F".repeat(e),left:"[G",hide:"[?25l",show:"[?25h",save:"7",restore:"8"},Cs={screen:"[2J",up:(e=1)=>"[1J".repeat(e),down:(e=1)=>"[J".repeat(e),line:"[2K",lineEnd:"[K",lineStart:"[1K",lines(e){let t="";for(let r=0;r<e;r++)t+=this.line+(r<e-1?_s.up():"");return e&&(t+=_s.left),t}};var xs={cursor:_s,scroll:{up:(e=1)=>"[S".repeat(e),down:(e=1)=>"[T".repeat(e)},erase:Cs,beep:""};function Os(e,t=process.stdout.columns){if(!t)return xs.erase.line+xs.cursor.to(0);let r=0;const n=e.split(/\r?\n/);for(let e of n)r+=1+Math.floor(Math.max([...Ss(e)].length-1,0)/t);return(xs.erase.line+xs.cursor.prevLine()).repeat(r-1)+xs.erase.line+xs.cursor.to(0)}const ks="win32"===process.platform?{tick:"âˆš",cross:"Ã—",ellipsis:"...",pointerSmall:"Â»",line:"â”€",pointer:">"}:{tick:"âœ”",cross:"âœ–",ellipsis:"â€¦",pointerSmall:"â€º",line:"â”€",pointer:"â¯"},Fs=Object.freeze({password:{scale:1,render:e=>"*".repeat(e.length)},emoji:{scale:2,render:e=>"ðŸ˜ƒ".repeat(e.length)},invisible:{scale:0,render:e=>""},default:{scale:1,render:e=>`${e}`}}),$s=Object.freeze({aborted:Te(ks.cross),done:De(ks.tick),default:He("?")}),As=(e,t)=>t?$s.aborted:e?$s.done:$s.default,Ps=e=>Re(e?ks.ellipsis:ks.pointerSmall);class Ns extends E.default{constructor(e={}){super(),this.in=e.in||process.stdin,this.out=e.out||process.stdout;const t=k.default.createInterface(this.in);k.default.emitKeypressEvents(this.in,t),this.in.isTTY&&this.in.setRawMode(!0);const r=(e,t)=>{let r=function(e){if(e.ctrl){if("a"===e.name)return"first";if("c"===e.name)return"abort";if("d"===e.name)return"abort";if("e"===e.name)return"last";if("g"===e.name)return"reset"}return"return"===e.name||"enter"===e.name?"submit":"backspace"===e.name?"delete":"abort"===e.name||"escape"===e.name?"abort":"tab"===e.name?"next":"up"===e.name?"up":"down"===e.name?"down":"right"===e.name?"right":"left"===e.name&&"left"}(t);!1===r?this._&&this._(e,t):"function"==typeof this[r]?this[r](t):this.bell()};this.close=()=>{this.out.write(xs.cursor.show),this.in.removeListener("keypress",r),this.in.isTTY&&this.in.setRawMode(!1),t.close(),this.emit(this.aborted?"abort":"submit",this.value)},this.in.on("keypress",r)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted})}bell(){this.out.write("")}}const Is=Object.freeze({__proto__:null,Prompt:Ns,ConfirmPrompt:class extends Ns{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.render(!0)}reset(){this.value=this.initialValue,this.fire(),this.render()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){return"y"===e.toLowerCase()?(this.value=!0,this.submit()):"n"===e.toLowerCase()?(this.value=!1,this.submit()):this.bell()}render(e){e&&this.out.write(xs.cursor.hide),this.done&&this.value?this.out.write(xs.erase.line):this.out.write(xs.erase.line+xs.cursor.to(0)+[As(this.done,this.aborted),this.msg,Ps(!1),this.done?De(this.value?"yes":"no"):Re(this.initialValue?"(Y/n)":"(y/N)")].join(" "))}},SelectPrompt:class extends Ns{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.cursor=e.initial||0,this.values=e.choices||[],this.value=e.choices[this.cursor].value,this.clear=Os(""),this.render(!0)}moveCursor(e){this.cursor=e,this.value=this.values[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.values.length-1),this.render()}up(){if(0===this.cursor)return this.bell();this.moveCursor(this.cursor-1),this.render()}down(){if(this.cursor===this.values.length-1)return this.bell();this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.values.length),this.render()}_(e,t){if(" "===e)return this.submit()}render(e){e?this.out.write(xs.cursor.hide):this.out.write(xs.erase.lines(this.values.length+2)),this.out.write([As(this.done,this.aborted),ke(this.msg),Ps(!1),this.done?De(this.values[this.cursor].title.split(" ")[0]):Re(this.hint)].join(" ")),this.done||this.out.write("\n\n"+this.values.map(((e,t)=>{let r=this.cursor===t?He(e.title):e.title;return`${this.cursor===t?He(ks.pointer)+" ":"  "} ${r}`})).join("\n"))}},TextPrompt:class extends Ns{constructor(e={}){var t;super(e),this.transform=(t=e.style,Fs[t]||Fs.default),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.value="",this.cursor=Number(!!this.initial),this.clear=Os(""),this.render()}set value(e){!e&&this.initial?(this.placeholder=!0,this.rendered=Re(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(e)),this._value=e,this.fire()}get value(){return this._value}reset(){this.value="",this.fire(),this.render()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.value=this.value||this.initial,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e)}_(e,t){let r=this.value.slice(0,this.cursor),n=this.value.slice(this.cursor);this.moveCursor(1),this.value=`${r}${e}${n}`,this.placeholder&&(this.cursor=0),this.render()}delete(){if(0===this.value.length)return this.bell();let e=this.value.slice(0,this.cursor-1),t=this.value.slice(this.cursor);this.value=`${e}${t}`,this.moveCursor(-1),this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}render(){const e=[As(this.done,this.aborted),ke(this.msg),Ps(!1),this.done?De(this.rendered):this.rendered].join(" ");this.out.write(this.clear+e),this.out.write(xs.cursor.move(this.placeholder?-this.initial.length*this.scale:-this.rendered.length+this.cursor*this.scale)),this.clear=Os(e)}}}),Ls=e=>e;function Ts(e,t,r={}){return new Promise(((n,i)=>{const o=new Is[e](t),s=r.onAbort||Ls,a=r.onSubmit||Ls;o.on("state",t.onState||Ls),o.on("submit",(e=>n(a(e)))),o.on("abort",(e=>i(s(e))))}))}const Ds=Object.freeze({__proto__:null,text:function(e){return Ts("TextPrompt",e)},confirm:function(e){return Ts("ConfirmPrompt",e)},select:function(e){return Ts("SelectPrompt",e)}}),js=["suggest","format","onState"],Bs=()=>{};async function Ms(e=[],{onSubmit:t=Bs,onCancel:r=Bs}={}){const n={};let i,o,s,a,c;e=[].concat(e);let u=Ms._map||{};for(o of e)if(({name:a,type:c}=o),void 0===u[a]){for(let e in o){if(js.includes(e))continue;let t=o[e];o[e]="function"==typeof t?await t(i,{...n},o):t}if("string"!=typeof o.message)throw new Error("prompt message is required");if(({name:a,type:c}=o),c){if(void 0===Ds[c])throw new Error(`prompt type (${c}) is not defined`);try{i=await Ds[c](o),n[a]=i=o.format?await o.format(i,n):i,s=t(o,i)}catch(e){s=!r(o)}if(s)return n}}else n[a]=u[a],delete u[a];return n}const Hs=(()=>{const e=process.env.npm_config_registry;return!(!e||!e.includes("yarn"))})(),zs=[];let Rs=null;function Us(e){Rs=e,e&&(qs(e),process.once("uncaughtException",(()=>Vs(!0))),process.once("exit",(()=>Vs())),process.once("SIGINT",(()=>Vs())),process.once("SIGTERM",(()=>Vs())))}function Vs(e=!1){Rs&&zs.forEach((e=>e.kill("SIGINT"))),setTimeout((()=>{Rs&&(qs(Rs),Rs=null),process.exit(e?1:0)}),200)}function qs(e){Mi.existsSync(e)&&(Mi.readdirSync(e).forEach((t=>{const n=r.join(e,t);Mi.lstatSync(n).isDirectory()?qs(n):Mi.unlinkSync(n)})),Mi.rmdirSync(e))}function Ws(){return"win32"===process.platform}function Gs(){return Ws()?">":"$"}const Js=e=>{console.log(`${De("âœ”")} ${ke(e)}`)},Ys=async e=>{const{confirm:t}=await Ms([{type:"confirm",name:"confirm",message:e,initial:!0}]);return t},Ks=Hs?"yarn build":"npm run build",Xs=Hs?"yarn start":"npm start";var Zs={exports:{}};const Qs=C.default;let ea;var ta=()=>(void 0===ea&&(ea=function(){try{return Qs.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return Qs.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),ea);const ra=B.default,na=C.default,ia=ta,oa=()=>{if("linux"!==process.platform)return!1;if(ra.release().toLowerCase().includes("microsoft"))return!ia();try{return!!na.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!ia()}catch(e){return!1}};process.env.__IS_WSL_TEST__?Zs.exports=oa:Zs.exports=oa();const sa=_.default,aa=S.default,{promises:ca,constants:ua}=C.default,la=Zs.exports,ha=ta,da=(e,t,r)=>{const n=r=>Object.defineProperty(e,t,{value:r,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=r();return n(e),e},set(e){n(e)}}),e},fa=sa.join(__dirname,"xdg-open"),{platform:pa,arch:ma}=process,ga=(()=>{const e="/mnt/";let t;return async function(){if(t)return t;const r="/etc/wsl.conf";let n=!1;try{await ca.access(r,ua.F_OK),n=!0}catch{}if(!n)return e;const i=await ca.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(t=o.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e}})(),ya=async(e,t)=>{let r;for(const n of e)try{return await t(n)}catch(e){r=e}throw r},wa=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return ya(e.app,(t=>wa({...e,app:t})));let t,{name:r,arguments:n=[]}=e.app||{};if(n=[...n],Array.isArray(r))return ya(r,(t=>wa({...e,app:{name:t,arguments:n}})));const i=[],o={};if("darwin"===pa)t="open",e.wait&&i.push("--wait-apps"),e.background&&i.push("--background"),e.newInstance&&i.push("--new"),r&&i.push("-a",r);else if("win32"===pa||la&&!ha()){const s=await ga();t=la?`${s}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","â€“ExecutionPolicy","Bypass","-EncodedCommand"),la||(o.windowsVerbatimArguments=!0);const a=["Start"];e.wait&&a.push("-Wait"),r?(a.push(`"\`"${r}\`""`,"-ArgumentList"),e.target&&n.unshift(e.target)):e.target&&a.push(`"${e.target}"`),n.length>0&&(n=n.map((e=>`"\`"${e}\`""`)),a.push(n.join(","))),e.target=Buffer.from(a.join(" "),"utf16le").toString("base64")}else{if(r)t=r;else{const e=!__dirname||"/"===__dirname;let r=!1;try{await ca.access(fa,ua.X_OK),r=!0}catch{}t=process.versions.electron||"android"===pa||e||!r?"xdg-open":fa}n.length>0&&i.push(...n),e.wait||(o.stdio="ignore",o.detached=!0)}e.target&&i.push(e.target),"darwin"===pa&&n.length>0&&i.push("--args",...n);const s=aa.spawn(t,i,o);return e.wait?new Promise(((t,r)=>{s.once("error",r),s.once("close",(n=>{e.allowNonzeroExitCode&&n>0?r(new Error(`Exited with code ${n}`)):t(s)}))})):(s.unref(),s)},va=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");return wa({...t,target:e})};function ba(e){if("string"==typeof e||Array.isArray(e))return e;const{[ma]:t}=e;if(!t)throw new Error(`${ma} is not supported`);return t}function Ea({[pa]:e},{wsl:t}){if(t&&la)return ba(t);if(!e)throw new Error(`${pa} is not supported`);return ba(e)}const Sa={};da(Sa,"chrome",(()=>Ea({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}))),da(Sa,"firefox",(()=>Ea({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}))),da(Sa,"edge",(()=>Ea({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}))),va.apps=Sa,va.openApp=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a `name`");const{arguments:r=[]}=t||{};if(null!=r&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return wa({...t,app:{name:e,arguments:r}})};var _a=va;const Ca="http://localhost:1234";let xa;const Oa=()=>{const e=y.userInfo();return r.join(e.homedir,".config","builder","credentials.json")},ka=async()=>{if(xa)return xa;const e=Oa();try{if(Mi.existsSync(e)){const t=await Mi.readJSON(e);if("object"==typeof t&&null!=t&&"1"===t.version)return xa=t,xa}}catch(e){return void console.error(e)}return await $a()},Fa=async()=>{const e=await(async()=>{const e=await ka();if(!e)throw new Error("Login with builder.io failed");return e})();return e.apiKey?e.apiKey:(await $a()).apiKey},$a=async()=>{const e=await Pa();return xa=await Aa(e),xa},Aa=async e=>{const t=Oa(),r={...xa||{},version:"1"};return e.privateKey&&(r.privateKey=e.privateKey),e.apiKey&&(r.apiKey=e.apiKey),xa=r,await Mi.outputJSON(t,r),r},Pa=()=>(console.log(`\nðŸ”‘ ${et(ke("Login required"))}`),Ys(` Your browser will open to complete authentication. ${ke("Confirm?")}`).then((e=>{if(!e)throw new Error("aborted");const t=new wt(ke(" Waiting for authorization..."));return new Promise(((e,r)=>{const n=M.default.createServer(((i,o)=>{const s=new URL(i.url,"http://localhost:10110/");if(console.log("parsedUrl.pathname",s.pathname),console.log("req.method",i.method),"/auth"!==s.pathname)return void r(new Error("Bad path"));console.log(i.url);const a=s.searchParams,c=a.get("p-key");if(!c)return void r(new Error("Missing p-key"));const u=a.get("api-key");u?(o.writeHead(302,{Location:`${Ca}/cli-auth?success=true`}),o.end(),i.socket.end(),i.socket.destroy(),n.close(),t.stop(!0),e({privateKey:c,apiKey:u})):r(new Error("Missing api-key"))})).listen(10110);t.setSpinnerString(8),t.start(),(async(e,t)=>{const r=encodeURIComponent(B.default.hostname());await _a(`${Ca}/cli-auth?response_type=code&client_id=${t}&host=${r}`,{app:{name:"google chrome"}})})(0,"create-builder")}))}))),Na=new Map;async function Ia(e,n,i){if(Mi.existsSync(n))throw new Error(`Folder "./${n}" already exists, please choose a different project name.`);if(!function(e){return!/[^a-zA-Z0-9-]/.test(e)}(n=n.toLowerCase().trim()))throw new Error(`Project name "${n}" is not valid. It must be a kebab-case name without spaces.`);const o=Date.now(),s=await function(e){let n=Na.get(e);n||(n=async function(e){const n=process.cwd(),i=r.join(n,".tmp-builder-starter"),o=new wt(ke("Downloading starter"));o.setSpinnerString(18),o.start();const s=await ko(e);Us(i),o.stop(!0),Js("Starter downloaded");const a=new wt(ke("Unpacking starter"));return a.setSpinnerString(18),a.start(),await bs(s,i,e.prefix),a.stop(!0),Js("Starter unpacked"),await function(e){return new Promise(((r,n)=>{const i=Hs?["--silent","--ignore-engines","--no-node-version-check"]:["install","--loglevel=error","--no-audit","--no-fund"],o=t.spawn(Hs?"yarn":"npm",i,{shell:!0,stdio:"inherit",cwd:e});o.once("exit",(()=>r())),o.once("error",n),zs.push(o)}))}(i),Js("Deps installed"),async(e,t)=>{const o=r.join(n,e);await Mi.rename(i,o);for(const[e,n]of Object.entries(t))await g.replaceInFile({files:[r.join(o,"*"),r.join(o,"src/**/*"),r.join(o,"pages/**/*"),r.join(o,"components/**/*")],ignore:["node_modules","dist","build",".git"],from:new RegExp(`builder-${e}`,"g"),allowEmptyPaths:!0,to:n});Us(null)}}(e),n.catch((()=>{})),Na.set(e,n));return n}(e);if(!s)throw new Error("starter install failed");const a=await Fa();await s(n,{"project-name":n,"public-key":a});const c=(u=Date.now()-o)>1e3?`in ${(u/1e3).toFixed(2)} s`:`in ${parseFloat(u.toFixed(3))} ms`;var u,l;if(console.log(`${De("âœ”")} ${ke("All setup")} ${l="ðŸŽ‰",Ws()?l:""} ${Fe(c)}\n\n  ${Fe(Gs())} ${De("cd")} ${n}\n\n  ${Fe(Gs())} ${De(Xs)}\n    Starts the development server.\n\n  ${Fe(Gs())} ${De(Ks)}\n    Builds your app in production mode.\n\n${function(e){const t=e.docs;if(!t)return"";return`\n  ${Fe("Further reading:")}\n\n   ${Fe("-")} ${He(t)}`}(e)}\n\n  Happy coding! ðŸŽˆ\n`),i){await Ys(`Run dev server and open the builder's editor in the browser. ${ke("Confirm?")}`)?(console.log(`\n${Fe("Opening dev server and editor in the browser:")}\n  ${De("âœ”")} Opening browser...\n  ${De("âœ”")} ${Fe(Gs())} ${De("cd")} ${n}\n  ${De("âœ”")} ${Fe(Gs())} ${De(Xs)}\n`),setTimeout((()=>{(async(e,t=3e3)=>{const r=encodeURIComponent(`http://localhost:${t}`);await _a(`${Ca}/onboarding/starter?overridePreviewUrl=${r}&project_name=${e}`,{app:{name:"google chrome"}})})(n,3e3)}),2e3),await function(e,r,n="ignore"){return new Promise(((i,o)=>{const s=t.spawn(Hs?"yarn":"npm",[e],{shell:!0,stdio:n,cwd:r});s.once("exit",(()=>i())),s.once("error",o),zs.push(s)}))}("start",n,"inherit")):console.log("\n  aborting...")}}const La=[{name:"react",repo:"manucorporat/test-builder-starter",description:"Simple create-react-app using builder",docs:"https://github.com/BuilderIO/builder-react-example-starter",prefix:"create-react-app"},{name:"nextjs (SSR)",repo:"manucorporat/test-builder-starter",description:"Basic React app with nextjs server-side rendering",docs:"https://github.com/BuilderIO/nextjs-shopify#readme",prefix:"nextjs"}];function Ta(e){if(e.includes("/"))return{name:e,repo:e};const t=La.find((t=>t.name===e));if(!t)throw new Error(`Starter "${e}" does not exist.`);return t}async function Da(e,t){process.stdout.write(xs.erase.screen),process.stdout.write(xs.cursor.to(0,1)),e||(e=await async function(){const{starterName:e}=await Ms([{type:"select",name:"starterName",message:"Pick a starter",choices:ja()},{type:e=>null===e?"text":null,name:"starterName",message:"Type a custom starter"}]);if(!e)throw new Error("No starter was provided, try again.");return e}());const r=Ta(e),n=await Ba();await async function(e,t){return Ys(ke("Confirm?"))}()?await Ia(r,n,t):console.log("\n  aborting...")}function ja(){const e=Math.max(...La.map((e=>e.name.length)))+1;return[...La.filter((e=>!0!==e.hidden)).map((t=>{const r=t.description?Fe(t.description):"";return{title:`${Ma(t.name,e)}   ${r}`,value:t.name}}))]}async function Ba(){const{projectName:e}=await Ms([{type:"text",name:"projectName",message:"Project name",initial:"my-builder-app"}]);return!e||Mi.existsSync(e)?(t=`Folder "./${e}" already exists, try a different project name.`,console.log(`${Te("âŒ")} ${t}`),await Ba()):e;var t}function Ma(e,t,r=" "){return t>>=0,e.length>t?e:((t-=e.length)>r.length&&(r+=r.repeat(t/r.length)),String(e)+r.slice(0,t))}const Ha=async(e,t,r)=>{!function(){try{const e=process.version.replace("v","").split(".");parseInt(e[0],10)<14&&console.log(je(`Your current version of Node is ${process.version}, however the recommendation is a minimum of Node v14. Note that future versions of Builder will eventually remove support for non-LTS Node versions.`))}catch(e){}}();let n=!1;try{t&&r?await Ia(Ta(t),r,e):await Da(t,e)}catch(e){n=!0,e instanceof Error&&console.error(`\n${Te("âœ–")} ${e.message}\n`)}Vs(n)};!async function(){const e=new z.exports.Command;e.option("-d,--debug","print debugging information").option("--pkey [pkey]","set private key manually").description("create a new space").option("--starter [starter]","print debugging information").option("--name [name]","project name").option("--welcome [welcome]","starts the onboarding user flow").action((async e=>{const t=e.welcome;t&&await Aa({apiKey:t}),await(async e=>{e.pkey&&await Aa({privateKey:e.pkey})})(e),await Ha(!0,e.starter,e.name)})),e.parse(process.argv)}();